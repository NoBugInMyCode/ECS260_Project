{
    "https://api.github.com/repos/jina-ai/clip-as-service": {
        "forks": 2075,
        "watchers": 12533,
        "stars": 12533,
        "languages": {
            "Python": 207709,
            "Shell": 6769,
            "Dockerfile": 5895
        },
        "commits": [
            "2023-12-20T04:13:31Z",
            "2023-12-20T04:09:07Z",
            "2023-11-16T10:05:38Z",
            "2023-06-14T02:16:05Z",
            "2023-06-14T02:14:42Z",
            "2023-05-16T09:35:56Z",
            "2023-04-19T08:23:57Z",
            "2023-04-19T04:52:33Z",
            "2023-04-14T04:03:17Z",
            "2023-04-12T09:32:14Z",
            "2023-03-26T20:30:27Z",
            "2023-03-21T03:35:45Z",
            "2023-03-21T01:06:02Z",
            "2023-03-07T07:25:16Z",
            "2023-02-22T10:36:58Z",
            "2023-02-09T07:48:08Z",
            "2022-12-29T01:27:23Z",
            "2022-12-26T10:02:15Z",
            "2022-12-12T04:41:58Z",
            "2022-12-09T06:33:54Z",
            "2022-12-08T08:27:01Z",
            "2022-12-07T07:03:33Z",
            "2022-12-02T07:45:51Z",
            "2022-12-02T02:05:15Z",
            "2022-11-29T06:33:26Z",
            "2022-11-25T09:07:42Z",
            "2022-11-24T05:33:34Z",
            "2022-11-24T04:16:19Z",
            "2022-11-15T11:15:58Z",
            "2022-11-15T07:53:19Z"
        ],
        "creation_date": "2018-11-12T10:48:50Z",
        "contributors": 30,
        "topics": [
            "bert",
            "bert-as-service",
            "clip-as-service",
            "clip-model",
            "cross-modal-retrieval",
            "cross-modality",
            "deep-learning",
            "image2vec",
            "multi-modality",
            "neural-search",
            "onnx",
            "openai",
            "pytorch",
            "sentence-encoding",
            "sentence2vec"
        ],
        "subscribers": 222,
        "readme": "<p align=\"center\">\n<a href=\"https://clip-as-service.jina.ai\"><img src=\"https://github.com/jina-ai/clip-as-service/blob/main/docs/_static/logo-light.svg?raw=true\" alt=\"CLIP-as-service logo: The data structure for unstructured data\" width=\"200px\"></a>\n<br><br><br>\n</p>\n\n\n<p align=center>\n<a href=\"https://pypi.org/project/clip_server/\"><img alt=\"PyPI\" src=\"https://img.shields.io/pypi/v/clip_server?label=Release&style=flat-square\"></a>\n<a href=\"https://discord.jina.ai\"><img src=\"https://img.shields.io/discord/1106542220112302130?logo=discord&logoColor=white&style=flat-square\"></a>\n<a href=\"https://codecov.io/gh/jina-ai/clip-as-service\"><img alt=\"Codecov branch\" src=\"https://img.shields.io/codecov/c/github/jina-ai/clip-as-service/main?logo=Codecov&logoColor=white&style=flat-square\"></a>\n<a href=\"https://colab.research.google.com/github/jina-ai/clip-as-service/blob/main/docs/hosting/cas-on-colab.ipynb\"><img src=\"https://img.shields.io/badge/Host-on%20Google%20Colab%20(GPU/TPU)-brightgreen?style=flat-square&logo=googlecolab&&logoColor=white\" alt=\"Host on Google Colab with GPU/TPU support\"></a>\n</p>\n\n<!-- start elevator-pitch -->\n\nCLIP-as-service is a low-latency high-scalability service for embedding images and text. It can be easily integrated as a microservice into neural search solutions.\n\n\u26a1 **Fast**: Serve CLIP models with TensorRT, ONNX runtime and PyTorch w/o JIT with 800QPS<sup>[*]</sup>. Non-blocking duplex streaming on requests and responses, designed for large data and long-running tasks. \n\n\ud83e\uded0 **Elastic**: Horizontally scale up and down multiple CLIP models on single GPU, with automatic load balancing.\n\n\ud83d\udc25 **Easy-to-use**: No learning curve, minimalist design on client and server. Intuitive and consistent API for image and sentence embedding. \n\n\ud83d\udc52 **Modern**: Async client support. Easily switch between gRPC, HTTP, WebSocket protocols with TLS and compression.\n\n\ud83c\udf71 **Integration**: Smooth integration with neural search ecosystem including [Jina](https://github.com/jina-ai/jina) and [DocArray](https://github.com/jina-ai/docarray). Build cross-modal and multi-modal solutions in no time. \n\n<sup>[*] with default config (single replica, PyTorch no JIT) on GeForce RTX 3090. </sup>\n\n<!-- end elevator-pitch -->\n\n### Text & image embedding\n\n<table>\n<tr>\n<td> via HTTPS \ud83d\udd10 </td>\n<td> via gRPC \ud83d\udd10\u26a1\u26a1 </td>\n</tr>\n<tr>\n<td>\n\n```bash\ncurl \\\n-X POST https://<your-inference-address>-http.wolf.jina.ai/post \\\n-H 'Content-Type: application/json' \\\n-H 'Authorization: <your access token>' \\\n-d '{\"data\":[{\"text\": \"First do it\"}, \n    {\"text\": \"then do it right\"}, \n    {\"text\": \"then do it better\"}, \n    {\"uri\": \"https://picsum.photos/200\"}], \n    \"execEndpoint\":\"/\"}'\n```\n\n</td>\n<td>\n\n```python\n# pip install clip-client\nfrom clip_client import Client\n\nc = Client(\n    'grpcs://<your-inference-address>-grpc.wolf.jina.ai',\n    credential={'Authorization': '<your access token>'},\n)\n\nr = c.encode(\n    [\n        'First do it',\n        'then do it right',\n        'then do it better',\n        'https://picsum.photos/200',\n    ]\n)\nprint(r)\n```\n</td>\n</tr>\n</table>\n\n### Visual reasoning\n\nThere are four basic visual reasoning skills: object recognition, object counting, color recognition, and spatial relation understanding. Let's try some:\n\n> You need to install [`jq` (a JSON processor)](https://stedolan.github.io/jq/) to prettify the results.\n\n<table>\n<tr>\n<td> Image </td>\n<td> via HTTPS \ud83d\udd10 </td>\n</tr>\n<tr>\n<td>\n<img src=\"https://picsum.photos/id/1/300/300\">\n</td>\n<td>\n\n```bash\ncurl \\\n-X POST https://<your-inference-address>-http.wolf.jina.ai/post \\\n-H 'Content-Type: application/json' \\\n-H 'Authorization: <your access token>' \\\n-d '{\"data\":[{\"uri\": \"https://picsum.photos/id/1/300/300\",\n\"matches\": [{\"text\": \"there is a woman in the photo\"},\n            {\"text\": \"there is a man in the photo\"}]}],\n            \"execEndpoint\":\"/rank\"}' \\\n| jq \".data[].matches[] | (.text, .scores.clip_score.value)\"\n```\n\ngives:\n\n```\n\"there is a woman in the photo\"\n0.626907229423523\n\"there is a man in the photo\"\n0.37309277057647705\n```\n\n</td>\n</tr>\n<tr>\n<td>\n<img src=\"https://picsum.photos/id/133/300/300\">\n</td>\n<td>\n\n```bash\ncurl \\\n-X POST https://<your-inference-address>-http.wolf.jina.ai/post \\\n-H 'Content-Type: application/json' \\\n-H 'Authorization: <your access token>' \\\n-d '{\"data\":[{\"uri\": \"https://picsum.photos/id/133/300/300\",\n\"matches\": [\n{\"text\": \"the blue car is on the left, the red car is on the right\"},\n{\"text\": \"the blue car is on the right, the red car is on the left\"},\n{\"text\": \"the blue car is on top of the red car\"},\n{\"text\": \"the blue car is below the red car\"}]}],\n\"execEndpoint\":\"/rank\"}' \\\n| jq \".data[].matches[] | (.text, .scores.clip_score.value)\"\n```\n\ngives:\n```\n\"the blue car is on the left, the red car is on the right\"\n0.5232442617416382\n\"the blue car is on the right, the red car is on the left\"\n0.32878655195236206\n\"the blue car is below the red car\"\n0.11064132302999496\n\"the blue car is on top of the red car\"\n0.03732786327600479\n```\n\n</td>\n</tr>\n\n\n<tr>\n<td>\n<img src=\"https://picsum.photos/id/102/300/300\">\n</td>\n<td>\n\n```bash\ncurl \\\n-X POST https://<your-inference-address>-http.wolf.jina.ai/post \\\n-H 'Content-Type: application/json' \\\n-H 'Authorization: <your access token>' \\\n-d '{\"data\":[{\"uri\": \"https://picsum.photos/id/102/300/300\",\n\"matches\": [{\"text\": \"this is a photo of one berry\"},\n            {\"text\": \"this is a photo of two berries\"},\n            {\"text\": \"this is a photo of three berries\"},\n            {\"text\": \"this is a photo of four berries\"},\n            {\"text\": \"this is a photo of five berries\"},\n            {\"text\": \"this is a photo of six berries\"}]}],\n            \"execEndpoint\":\"/rank\"}' \\\n| jq \".data[].matches[] | (.text, .scores.clip_score.value)\"\n```\n\ngives:\n```\n\"this is a photo of three berries\"\n0.48507222533226013\n\"this is a photo of four berries\"\n0.2377079576253891\n\"this is a photo of one berry\"\n0.11304923892021179\n\"this is a photo of five berries\"\n0.0731358453631401\n\"this is a photo of two berries\"\n0.05045759305357933\n\"this is a photo of six berries\"\n0.04057715833187103\n```\n\n</td>\n</tr>\n\n\n</table>\n\n\n## [Documentation](https://clip-as-service.jina.ai)\n\n## Install\n\nCLIP-as-service consists of two Python packages `clip-server` and `clip-client` that can be installed _independently_. Both require Python 3.7+. \n\n### Install server\n\n<table>\n<tr>\n<td> Pytorch Runtime \u26a1 </td>\n<td> ONNX Runtime \u26a1\u26a1</td>\n<td> TensorRT Runtime \u26a1\u26a1\u26a1 </td>\n</tr>\n<tr>\n<td>\n\n```bash\npip install clip-server\n```\n\n</td>\n<td>\n\n```bash\npip install \"clip-server[onnx]\"\n```\n\n</td>\n<td>\n\n```bash\npip install nvidia-pyindex \npip install \"clip-server[tensorrt]\"\n```\n</td>\n</tr>\n</table>\n\nYou can also [host the server on Google Colab](https://clip-as-service.jina.ai/hosting/colab/), leveraging its free GPU/TPU.\n\n### Install client\n\n```bash\npip install clip-client\n```\n\n### Quick check\n\nYou can run a simple connectivity check after install.\n\n\n<table>\n<tr>\n<th> C/S </th> \n<th> Command </th> \n<th> Expect output </th>\n</tr>\n<tr>\n<td>\nServer\n</td>\n<td> \n\n```bash\npython -m clip_server\n```\n     \n</td>\n<td>\n\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/server-output.svg?raw=true\" alt=\"Expected server output\" width=\"300px\">\n\n</td>\n</tr>\n<tr>\n<td>\nClient\n</td>\n<td> \n\n```python\nfrom clip_client import Client\n\nc = Client('grpc://0.0.0.0:23456')\nc.profile()\n```\n     \n</td>\n<td>\n\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/pyclient-output.svg?raw=true\" alt=\"Expected clip-client output\" width=\"300px\">\n\n</td>\n</tr>\n</table>\n\n\nYou can change `0.0.0.0` to the intranet or public IP address to test the connectivity over private and public network. \n\n\n## Get Started\n\n### Basic usage\n\n1. Start the server: `python -m clip_server`. Remember its address and port.\n2. Create a client:\n   ```python\n    from clip_client import Client\n   \n    c = Client('grpc://0.0.0.0:51000')\n    ```\n3. To get sentence embedding:\n    ```python    \n    r = c.encode(['First do it', 'then do it right', 'then do it better'])\n    \n    print(r.shape)  # [3, 512] \n    ```\n4. To get image embedding:\n    ```python    \n    r = c.encode(['apple.png',  # local image \n                  'https://clip-as-service.jina.ai/_static/favicon.png',  # remote image\n                  'data:image/gif;base64,R0lGODlhEAAQAMQAAORHHOVSKudfOulrSOp3WOyDZu6QdvCchPGolfO0o/XBs/fNwfjZ0frl3/zy7////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABAALAAAAAAQABAAAAVVICSOZGlCQAosJ6mu7fiyZeKqNKToQGDsM8hBADgUXoGAiqhSvp5QAnQKGIgUhwFUYLCVDFCrKUE1lBavAViFIDlTImbKC5Gm2hB0SlBCBMQiB0UjIQA7'])  # in image URI\n    \n    print(r.shape)  # [3, 512]\n    ```\n\nMore comprehensive server and client user guides can be found in the [docs](https://clip-as-service.jina.ai/).\n\n### Text-to-image cross-modal search in 10 lines\n\nLet's build a text-to-image search using CLIP-as-service. Namely, a user can input a sentence and the program returns matching images. We'll use the [Totally Looks Like](https://sites.google.com/view/totally-looks-like-dataset) dataset and [DocArray](https://github.com/jina-ai/docarray) package. Note that DocArray is included within `clip-client` as an upstream dependency, so you don't need to install it separately.\n\n#### Load images\n\nFirst we load images. You can simply pull them from Jina Cloud:\n\n```python\nfrom docarray import DocumentArray\n\nda = DocumentArray.pull('ttl-original', show_progress=True, local_cache=True)\n```\n\n<details>\n<summary>or download TTL dataset, unzip, load manually</summary>\n\nAlternatively, you can go to [Totally Looks Like](https://sites.google.com/view/totally-looks-like-dataset) official website, unzip and load images:\n\n```python\nfrom docarray import DocumentArray\n\nda = DocumentArray.from_files(['left/*.jpg', 'right/*.jpg'])\n```\n\n</details>\n\nThe dataset contains 12,032 images, so it may take a while to pull. Once done, you can visualize it and get the first taste of those images:\n\n```python\nda.plot_image_sprites()\n```\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/ttl-image-sprites.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" width=\"50%\">\n</p>\n\n#### Encode images\n\nStart the server with `python -m clip_server`. Let's say it's at `0.0.0.0:51000` with `GRPC` protocol (you will get this information after running the server).\n\nCreate a Python client script:\n\n```python\nfrom clip_client import Client\n\nc = Client(server='grpc://0.0.0.0:51000')\n\nda = c.encode(da, show_progress=True)\n```\n\nDepending on your GPU and client-server network, it may take a while to embed 12K images. In my case, it took about two minutes.\n\n<details>\n<summary>Download the pre-encoded dataset</summary>\n\nIf you're impatient or don't have a GPU, waiting can be Hell. In this case, you can simply pull our pre-encoded image dataset:\n\n```python\nfrom docarray import DocumentArray\n\nda = DocumentArray.pull('ttl-embedding', show_progress=True, local_cache=True)\n```\n\n</details>\n\n#### Search via sentence \n\nLet's build a simple prompt to allow a user to type sentence:\n\n```python\nwhile True:\n    vec = c.encode([input('sentence> ')])\n    r = da.find(query=vec, limit=9)\n    r[0].plot_image_sprites()\n```\n\n#### Showcase\n\nNow you can input arbitrary English sentences and view the top-9 matching images. Search is fast and instinctive. Let's have some fun:\n\n<table>\n<tr>\n<th> \"a happy potato\" </th> \n<th> \"a super evil AI\" </th> \n<th> \"a guy enjoying his burger\" </th>\n</tr>\n<tr>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/a-happy-potato.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" width=\"100%\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/a-super-evil-AI.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" width=\"100%\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/a-guy-enjoying-his-burger.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" width=\"100%\">\n</p>\n\n</td>\n</tr>\n</table>\n\n\n<table>\n<tr>\n<th> \"professor cat is very serious\" </th> \n<th> \"an ego engineer lives with parent\" </th> \n<th> \"there will be no tomorrow so lets eat unhealthy\" </th>\n</tr>\n<tr>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/professor-cat-is-very-serious.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" width=\"100%\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/an-ego-engineer-lives-with-parent.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" width=\"100%\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/there-will-be-no-tomorrow-so-lets-eat-unhealthy.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" width=\"100%\">\n</p>\n\n</td>\n</tr>\n</table>\n\nLet's save the embedding result for our next example: \n\n```python\nda.save_binary('ttl-image')\n```\n\n### Image-to-text cross-modal search in 10 Lines\n\nWe can also switch the input and output of the last program to achieve image-to-text search. Precisely, given a query image find the sentence that best describes the image.\n\nLet's use all sentences from the book \"Pride and Prejudice\". \n\n```python\nfrom docarray import Document, DocumentArray\n\nd = Document(uri='https://www.gutenberg.org/files/1342/1342-0.txt').load_uri_to_text()\nda = DocumentArray(\n    Document(text=s.strip()) for s in d.text.replace('\\r\\n', '').split('.') if s.strip()\n)\n```\n\nLet's look at what we got:\n\n```python\nda.summary()\n```\n\n```text\n            Documents Summary            \n                                         \n  Length                 6403            \n  Homogenous Documents   True            \n  Common Attributes      ('id', 'text')  \n                                         \n                     Attributes Summary                     \n                                                            \n  Attribute   Data type   #Unique values   Has empty value  \n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \n  id          ('str',)    6403             False            \n  text        ('str',)    6030             False            \n```\n\n#### Encode sentences\n\nNow encode these 6,403 sentences, it may take 10 seconds or less depending on your GPU and network: \n\n```python\nfrom clip_client import Client\n\nc = Client('grpc://0.0.0.0:51000')\n\nr = c.encode(da, show_progress=True)\n```\n\n<details>\n<summary>Download the pre-encoded dataset</summary>\n\nAgain, for people who are impatient or don't have a GPU, we have prepared a pre-encoded text dataset:\n\n```python\nfrom docarray import DocumentArray\n\nda = DocumentArray.pull('ttl-textual', show_progress=True, local_cache=True)\n```\n\n</details>\n\n#### Search via image\n\nLet's load our previously stored image embedding, randomly sample 10 image Documents, then find top-1 nearest neighbour of each.\n\n```python\nfrom docarray import DocumentArray\n\nimg_da = DocumentArray.load_binary('ttl-image')\n\nfor d in img_da.sample(10):\n    print(da.find(d.embedding, limit=1)[0].text)\n```\n\n#### Showcase\n\nFun time! Note, unlike the previous example, here the input is an image and the sentence is the output. All sentences come from the book \"Pride and Prejudice\". \n\n<table>\n<tr>\n<td>\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/Besides,-there-was-truth-in-his-looks.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/Gardiner-smiled.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/what\u2019s-his-name.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/By-tea-time,-however,-the-dose-had-been-enough,-and-Mr.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/You-do-not-look-well.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n</tr>\n<tr>\n<td>Besides, there was truth in his looks</td>\n<td>Gardiner smiled</td>\n<td>what\u2019s his name</td>\n<td>By tea time, however, the dose had been enough, and Mr</td>\n<td>You do not look well</td>\n</tr>\n</table>\n\n<table>\n<tr>\n<td>\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/\u201cA-gamester!\u201d-she-cried.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/If-you-mention-my-name-at-the-Bell,-you-will-be-attended-to.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/Never-mind-Miss-Lizzy\u2019s-hair.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/Elizabeth-will-soon-be-the-wife-of-Mr.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n\n<td>\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/I-saw-them-the-night-before-last.png?raw=true\" alt=\"Visualization of the image sprite of Totally looks like dataset\" height=\"100px\">\n</p>\n\n</td>\n</tr>\n<tr>\n<td>\u201cA gamester!\u201d she cried</td>\n<td>If you mention my name at the Bell, you will be attended to</td>\n<td>Never mind Miss Lizzy\u2019s hair</td>\n<td>Elizabeth will soon be the wife of Mr</td>\n<td>I saw them the night before last</td>\n</tr>\n</table>\n\n\n\n### Rank image-text matches via CLIP model\n\nFrom `0.3.0` CLIP-as-service adds a new `/rank` endpoint that re-ranks cross-modal matches according to their joint likelihood in CLIP model. For example, given an image Document with some predefined sentence matches as below:\n\n```python\nfrom clip_client import Client\nfrom docarray import Document\n\nc = Client(server='grpc://0.0.0.0:51000')\nr = c.rank(\n    [\n        Document(\n            uri='.github/README-img/rerank.png',\n            matches=[\n                Document(text=f'a photo of a {p}')\n                for p in (\n                    'control room',\n                    'lecture room',\n                    'conference room',\n                    'podium indoor',\n                    'television studio',\n                )\n            ],\n        )\n    ]\n)\n\nprint(r['@m', ['text', 'scores__clip_score__value']])\n```\n\n```text\n[['a photo of a television studio', 'a photo of a conference room', 'a photo of a lecture room', 'a photo of a control room', 'a photo of a podium indoor'], \n[0.9920725226402283, 0.006038925610482693, 0.0009973491542041302, 0.00078492151806131, 0.00010626466246321797]]\n```\n\nOne can see now `a photo of a television studio` is ranked to the top with `clip_score` score at `0.992`. In practice, one can use this endpoint to re-rank the matching result from another search system, for improving the cross-modal search quality.\n\n<table>\n<tr>\n<td>\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/rerank.png?raw=true\" alt=\"Rerank endpoint image input\" height=\"150px\">\n</td>\n<td>\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/rerank-chart.svg?raw=true\" alt=\"Rerank endpoint output\">\n</td>\n</tr>\n</table>\n\n### Rank text-image matches via CLIP model\n\nIn the [DALL\u00b7E Flow](https://github.com/jina-ai/dalle-flow) project, CLIP is called for ranking the generated results from DALL\u00b7E. [It has an Executor wrapped on top of `clip-client`](https://github.com/jina-ai/dalle-flow/blob/main/executors/rerank/executor.py), which calls `.arank()` - the async version of `.rank()`:\n\n```python\nfrom clip_client import Client\nfrom jina import Executor, requests, DocumentArray\n\n\nclass ReRank(Executor):\n    def __init__(self, clip_server: str, **kwargs):\n        super().__init__(**kwargs)\n        self._client = Client(server=clip_server)\n\n    @requests(on='/')\n    async def rerank(self, docs: DocumentArray, **kwargs):\n        return await self._client.arank(docs)\n```\n\n<p align=\"center\">\n<img src=\"https://github.com/jina-ai/clip-as-service/blob/main/.github/README-img/client-dalle.png?raw=true\" alt=\"CLIP-as-service used in DALLE Flow\" width=\"300px\">\n</p>\n\nIntrigued? That's only scratching the surface of what CLIP-as-service is capable of. [Read our docs to learn more](https://clip-as-service.jina.ai).\n\n<!-- start support-pitch -->\n## Support\n\n- Join our [Discord community](https://discord.jina.ai) and chat with other community members about ideas.\n- Watch our [Engineering All Hands](https://youtube.com/playlist?list=PL3UBBWOUVhFYRUa_gpYYKBqEAkO4sxmne) to learn Jina's new features and stay up-to-date with the latest AI techniques.\n- Subscribe to the latest video tutorials on our [YouTube channel](https://youtube.com/c/jina-ai)\n\n## Join Us\n\nCLIP-as-service is backed by [Jina AI](https://jina.ai) and licensed under [Apache-2.0](./LICENSE). [We are actively hiring](https://jobs.jina.ai) AI engineers, solution engineers to build the next neural search ecosystem in open-source.\n\n<!-- end support-pitch -->\n",
        "releases": [
            {
                "name": "\ud83d\udcab Patch v0.8.3",
                "date": "2023-12-20T04:13:56Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.8.2",
                "date": "2023-04-19T08:24:26Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.8.1",
                "date": "2022-11-15T11:16:45Z"
            },
            {
                "name": "\ud83d\udcab Release v0.8.0",
                "date": "2022-10-12T08:12:17Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.7.0",
                "date": "2022-09-13T13:48:30Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.6.2",
                "date": "2022-09-01T04:17:08Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.6.1",
                "date": "2022-08-30T13:58:13Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.6.0",
                "date": "2022-08-30T04:20:04Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.5.1",
                "date": "2022-08-08T05:12:05Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.5.0",
                "date": "2022-08-03T05:13:43Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.20",
                "date": "2022-06-21T15:45:51Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.19",
                "date": "2022-06-20T16:33:12Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.18",
                "date": "2022-06-20T11:21:52Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.17",
                "date": "2022-06-20T10:56:57Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.16",
                "date": "2022-06-14T08:52:56Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.15",
                "date": "2022-06-13T13:07:01Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.14",
                "date": "2022-06-09T13:40:36Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.13",
                "date": "2022-06-09T04:42:45Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.12",
                "date": "2022-06-01T08:29:35Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.11",
                "date": "2022-05-27T07:45:28Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.10",
                "date": "2022-05-24T07:47:34Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.9",
                "date": "2022-05-23T15:14:08Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.8",
                "date": "2022-05-13T09:25:24Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.7",
                "date": "2022-05-11T16:26:46Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.6",
                "date": "2022-05-11T15:12:03Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.5",
                "date": "2022-05-11T12:11:19Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.4",
                "date": "2022-05-11T12:01:48Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.3",
                "date": "2022-05-09T10:24:01Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.2",
                "date": "2022-05-09T05:33:21Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.1",
                "date": "2022-05-04T17:39:34Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.4.0",
                "date": "2022-04-30T20:26:05Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.3.5",
                "date": "2022-04-30T18:55:43Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.3.4",
                "date": "2022-04-30T15:17:38Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.3.3",
                "date": "2022-04-26T09:39:10Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.3.2",
                "date": "2022-04-26T09:16:52Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.3.1",
                "date": "2022-04-26T08:04:00Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.3.0",
                "date": "2022-04-25T15:14:07Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.2.3",
                "date": "2022-04-25T11:43:31Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.2.2",
                "date": "2022-04-24T07:29:11Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.2.1",
                "date": "2022-04-21T15:33:17Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.2.0",
                "date": "2022-04-18T04:28:30Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.15",
                "date": "2022-04-18T04:07:59Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.14",
                "date": "2022-04-14T02:39:58Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.13",
                "date": "2022-04-11T08:03:09Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.12",
                "date": "2022-04-07T02:21:38Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.11",
                "date": "2022-04-01T15:46:51Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.10",
                "date": "2022-03-31T10:32:07Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.9",
                "date": "2022-03-30T23:20:52Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.8",
                "date": "2022-03-30T14:31:40Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.7",
                "date": "2022-03-30T11:41:23Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.6",
                "date": "2022-03-29T07:03:09Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.5",
                "date": "2022-03-24T19:18:35Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.3",
                "date": "2022-03-24T13:04:13Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.2",
                "date": "2022-03-24T10:58:32Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.1",
                "date": "2022-03-24T09:04:00Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.1.0",
                "date": "2022-03-24T08:20:00Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.0.7",
                "date": "2022-03-24T07:05:29Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.0.6",
                "date": "2022-03-23T22:43:20Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.0.5",
                "date": "2022-03-23T22:09:59Z"
            },
            {
                "name": "\ud83d\udcab Patch v0.0.4",
                "date": "2022-03-23T21:46:38Z"
            },
            {
                "name": "Release v1.8.1",
                "date": "2019-02-02T02:38:29Z"
            },
            {
                "name": "Release v1.7.0",
                "date": "2019-01-14T04:09:53Z"
            },
            {
                "name": "Release v1.6.0",
                "date": "2018-12-18T12:20:19Z"
            },
            {
                "name": "Release v1.5.5",
                "date": "2018-12-14T13:20:49Z"
            },
            {
                "name": "Release v1.5",
                "date": "2018-12-10T06:38:39Z"
            },
            {
                "name": "Release v1.4",
                "date": "2018-12-05T14:06:31Z"
            },
            {
                "name": "Release v1.3",
                "date": "2018-12-03T03:58:25Z"
            },
            {
                "name": "Release v1.2",
                "date": "2018-11-26T12:44:50Z"
            },
            {
                "name": "Release v1.1",
                "date": "2018-11-20T13:57:06Z"
            },
            {
                "name": "Release v1.0",
                "date": "2018-11-16T08:02:45Z"
            }
        ]
    }
}