{
    "https://api.github.com/repos/sxei/chrome-plugin-demo": {
        "forks": 1896,
        "watchers": 8432,
        "stars": 8432,
        "languages": {
            "JavaScript": 21436,
            "HTML": 7022,
            "CSS": 1546
        },
        "commits": [
            "2020-06-18T03:32:20Z",
            "2020-06-08T11:16:45Z",
            "2020-05-19T04:54:15Z",
            "2019-12-24T07:04:44Z",
            "2019-10-29T07:46:01Z",
            "2019-01-14T03:32:47Z",
            "2018-11-08T06:36:46Z",
            "2018-11-07T15:12:10Z",
            "2018-01-15T03:32:42Z",
            "2017-07-10T14:36:59Z",
            "2017-06-25T18:13:17Z",
            "2017-06-23T13:11:15Z",
            "2017-06-16T10:54:57Z",
            "2017-06-02T11:40:48Z",
            "2017-06-02T11:40:11Z"
        ],
        "creation_date": "2017-06-02T11:40:11Z",
        "contributors": 2,
        "topics": [],
        "subscribers": 172,
        "readme": "# \u5199\u5728\u524d\u9762\n\n\u6211\u82b1\u4e86\u5c06\u8fd1\u4e00\u4e2a\u591a\u6708\u7684\u65f6\u95f4\u65ad\u65ad\u7eed\u7eed\u5199\u4e0b\u8fd9\u7bc7\u535a\u6587\uff0c\u5e76\u7cbe\u5fc3\u5199\u4e0b\u5b8c\u6574demo\uff0c\u6240\u4ee5\u8f6c\u8f7d\u52a1\u5fc5\u4fdd\u7559 http://blog.haoji.me/chrome-plugin-develop.html \u3002\u672c\u6587\u6240\u6709\u6d89\u53ca\u5230\u7684\u5927\u90e8\u5206\u4ee3\u7801\u5747\u5728\u8fd9\u4e2ademo\u91cc\u9762\uff1ahttps://github.com/sxei/chrome-plugin-demo \uff0c\u5927\u5bb6\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u4e0b\u6765\u8fd0\u884c\u3002\n\n\u53e6\u5916\uff0c\u672c\u6587\u56fe\u7247\u8f83\u591a\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u52a0\u8f7d\u5b8c\u6bd5\u3002\n\n\u672c\u6587\u76ee\u5f55\uff1a\n\n![](http://image.liuxianan.com/201707/20170710_222547_735_9922.png)\n\ndemo\u90e8\u5206\u622a\u56fe\uff1a\n\n![](http://image.liuxianan.com/201707/20170710_223150_516_6129.png)\n\n\u9274\u4e8e\u6709\u5f88\u591a\u7f51\u53cb\u6709\u4ea4\u6d41\u5b66\u4e60Chrome\u63d2\u4ef6\u7684\u8bc9\u6c42\uff0c\u6240\u4ee5\u6700\u8fd1\u5efa\u4e86\u4e00\u4e2a\u63d2\u4ef6\u5f00\u53d1\u4ea4\u6d41\u7fa4\uff0c\u4ec5\u4ec5\u662f\u4e3a\u4e86\u63d0\u4f9b\u4e00\u4e2a\u4e92\u76f8\u4ea4\u6d41\u5b66\u4e60\u7684\u5e73\u53f0\uff1a\n\n![_W791xH370_](https://img.alicdn.com/tfs/TB1rvUrJpY7gK0jSZKzXXaikpXa-1582-740.png)\n\n## \u4ed3\u5e93\u8bf4\u660e\n\n* `full-chrome-plugin-demo`\uff1a\u5927\u90e8\u5206demo\u4ee3\u7801\u90fd\u5728\u8fd9\u4e2a\u4ed3\u5e93\uff1b\n* `simple-chrome-plugin-demo`\uff1a\u6700\u7cbe\u7b80\u7684Chrome\u4ed3\u5e93\u6a21\u677f\uff0c\u5f53\u9700\u8981\u5feb\u901f\u5199\u4e00\u4e2a\u7b80\u5355\u4ed3\u5e93\u65f6\u53ef\u4ee5\u57fa\u4e8e\u8fd9\u4e2a\u6a21\u677f\uff1b\n* `page-action-demo`\uff1a\u5173\u4e8e`page-action`\u90e8\u5206\u7684demo\u4ee3\u7801\uff0c\u7531\u4e8e\u8fd9\u90e8\u5206\u4ee3\u7801\u548c`full-chrome-plugin-demo`\u51b2\u7a81\uff0c\u6240\u4ee5\u5355\u72ec\u62ff\u51fa\u6765\uff1b\n\n# \u524d\u8a00\n\n## \u4ec0\u4e48\u662fChrome\u63d2\u4ef6\n\n\u4e25\u683c\u6765\u8bb2\uff0c\u6211\u4eec\u6b63\u5728\u8bf4\u7684\u4e1c\u897f\u5e94\u8be5\u53ebChrome\u6269\u5c55(`Chrome Extension`)\uff0c\u771f\u6b63\u610f\u4e49\u4e0a\u7684Chrome\u63d2\u4ef6\u662f\u66f4\u5e95\u5c42\u7684\u6d4f\u89c8\u5668\u529f\u80fd\u6269\u5c55\uff0c\u53ef\u80fd\u9700\u8981\u5bf9\u6d4f\u89c8\u5668\u6e90\u7801\u6709\u4e00\u5b9a\u638c\u63e1\u624d\u6709\u80fd\u529b\u53bb\u5f00\u53d1\u3002\u9274\u4e8eChrome\u63d2\u4ef6\u7684\u53eb\u6cd5\u5df2\u7ecf\u4e60\u60ef\uff0c\u672c\u6587\u4e5f\u5168\u90e8\u91c7\u7528\u8fd9\u79cd\u53eb\u6cd5\uff0c\u4f46\u8bfb\u8005\u9700\u6df1\u77e5\u672c\u6587\u6240\u63cf\u8ff0\u7684Chrome\u63d2\u4ef6\u5b9e\u9645\u4e0a\u6307\u7684\u662fChrome\u6269\u5c55\u3002\n\nChrome\u63d2\u4ef6\u662f\u4e00\u4e2a\u7528Web\u6280\u672f\u5f00\u53d1\u3001\u7528\u6765\u589e\u5f3a\u6d4f\u89c8\u5668\u529f\u80fd\u7684\u8f6f\u4ef6\uff0c\u5b83\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u7531HTML\u3001CSS\u3001JS\u3001\u56fe\u7247\u7b49\u8d44\u6e90\u7ec4\u6210\u7684\u4e00\u4e2a[.crx](https://developer.chrome.com/extensions/crx)\u540e\u7f00\u7684\u538b\u7f29\u5305.\n\n\u4e2a\u4eba\u731c\u6d4b`crx`\u53ef\u80fd\u662f`Chrome Extension`\u5982\u4e0b3\u4e2a\u5b57\u6bcd\u7684\u7b80\u5199\uff1a\n\n![](http://image.liuxianan.com/201706/20170619_114836_364_3616.png)\n\n\u53e6\u5916\uff0c\u5176\u5b9e\u4e0d\u53ea\u662f\u524d\u7aef\u6280\u672f\uff0cChrome\u63d2\u4ef6\u8fd8\u53ef\u4ee5\u914d\u5408C++\u7f16\u5199\u7684dll\u52a8\u6001\u94fe\u63a5\u5e93\u5b9e\u73b0\u4e00\u4e9b\u66f4\u5e95\u5c42\u7684\u529f\u80fd(NPAPI)\uff0c\u6bd4\u5982\u5168\u5c4f\u5e55\u622a\u56fe\u3002\n\n![360\u62a2\u7968\u738b\u63d2\u4ef6dll\u622a\u56fe](http://image.liuxianan.com/201706/20170626_112802_406_9027.png)\n\n> \u7531\u4e8e\u5b89\u5168\u539f\u56e0\uff0cChrome\u6d4f\u89c8\u566842\u4ee5\u4e0a\u7248\u672c\u5df2\u7ecf\u9646\u7eed\u4e0d\u518d\u652f\u6301NPAPI\u63d2\u4ef6\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u66f4\u5b89\u5168\u7684PPAPI\u3002\n\n## \u5b66\u4e60Chrome\u63d2\u4ef6\u5f00\u53d1\u6709\u4ec0\u4e48\u610f\u4e49\n\n\u589e\u5f3a\u6d4f\u89c8\u5668\u529f\u80fd\uff0c\u8f7b\u677e\u5b9e\u73b0\u5c5e\u4e8e\u81ea\u5df1\u7684\u201c\u5b9a\u5236\u7248\u201d\u6d4f\u89c8\u5668\uff0c\u7b49\u7b49\u3002\n\nChrome\u63d2\u4ef6\u63d0\u4f9b\u4e86\u5f88\u591a\u5b9e\u7528API\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\n\n* \u4e66\u7b7e\u63a7\u5236\uff1b\n* \u4e0b\u8f7d\u63a7\u5236\uff1b\n* \u7a97\u53e3\u63a7\u5236\uff1b\n* \u6807\u7b7e\u63a7\u5236\uff1b\n* \u7f51\u7edc\u8bf7\u6c42\u63a7\u5236\uff0c\u5404\u7c7b\u4e8b\u4ef6\u76d1\u542c\uff1b\n* \u81ea\u5b9a\u4e49\u539f\u751f\u83dc\u5355\uff1b\n* \u5b8c\u5584\u7684\u901a\u4fe1\u673a\u5236\uff1b\n* \u7b49\u7b49\uff1b\n\n## \u4e3a\u4ec0\u4e48\u662fChrome\u63d2\u4ef6\u800c\u4e0d\u662fFirefox\u63d2\u4ef6\n\n1. Chrome\u5360\u6709\u7387\u66f4\u9ad8\uff0c\u66f4\u591a\u4eba\u7528\uff1b\n2. \u5f00\u53d1\u66f4\u7b80\u5355\uff1b\n3. \u5e94\u7528\u573a\u666f\u66f4\u5e7f\u6cdb\uff0cFirefox\u63d2\u4ef6\u53ea\u80fd\u8fd0\u884c\u5728Firefox\u4e0a\uff0c\u800cChrome\u9664\u4e86Chrome\u6d4f\u89c8\u5668\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u8fd0\u884c\u5728\u6240\u6709webkit\u5185\u6838\u7684\u56fd\u4ea7\u6d4f\u89c8\u5668\uff0c\u6bd4\u5982360\u6781\u901f\u6d4f\u89c8\u5668\u3001360\u5b89\u5168\u6d4f\u89c8\u5668\u3001\u641c\u72d7\u6d4f\u89c8\u5668\u3001QQ\u6d4f\u89c8\u5668\u7b49\u7b49\uff1b\n4. \u9664\u6b64\u4e4b\u5916\uff0cFirefox\u6d4f\u89c8\u5668\u4e5f\u5bf9Chrome\u63d2\u4ef6\u7684\u8fd0\u884c\u63d0\u4f9b\u4e86\u4e00\u5b9a\u7684\u652f\u6301\uff1b\n\n# \u5f00\u53d1\u4e0e\u8c03\u8bd5\n\nChrome\u63d2\u4ef6\u6ca1\u6709\u4e25\u683c\u7684\u9879\u76ee\u7ed3\u6784\u8981\u6c42\uff0c\u53ea\u8981\u4fdd\u8bc1\u672c\u76ee\u5f55\u6709\u4e00\u4e2a`manifest.json`\u5373\u53ef\uff0c\u4e5f\u4e0d\u9700\u8981\u4e13\u95e8\u7684IDE\uff0c\u666e\u901a\u7684web\u5f00\u53d1\u5de5\u5177\u5373\u53ef\u3002\n\n\u4ece\u53f3\u4e0a\u89d2\u83dc\u5355->\u66f4\u591a\u5de5\u5177->\u6269\u5c55\u7a0b\u5e8f\u53ef\u4ee5\u8fdb\u5165 \u63d2\u4ef6\u7ba1\u7406\u9875\u9762\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u5730\u5740\u680f\u8f93\u5165 [chrome://extensions](chrome://extensions/) \u8bbf\u95ee\u3002\n\n![](http://image.liuxianan.com/201706/20170620_195047_992_5668.png)\n\n\u52fe\u9009`\u5f00\u53d1\u8005\u6a21\u5f0f`\u5373\u53ef\u4ee5\u6587\u4ef6\u5939\u7684\u5f62\u5f0f\u76f4\u63a5\u52a0\u8f7d\u63d2\u4ef6\uff0c\u5426\u5219\u53ea\u80fd\u5b89\u88c5`.crx`\u683c\u5f0f\u7684\u6587\u4ef6\u3002Chrome\u8981\u6c42\u63d2\u4ef6\u5fc5\u987b\u4ece\u5b83\u7684Chrome\u5e94\u7528\u5546\u5e97\u5b89\u88c5\uff0c\u5176\u5b83\u4efb\u4f55\u7f51\u7ad9\u4e0b\u8f7d\u7684\u90fd\u65e0\u6cd5\u76f4\u63a5\u5b89\u88c5\uff0c\u6240\u4ee5\uff0c\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u628a`crx`\u6587\u4ef6\u89e3\u538b\uff0c\u7136\u540e\u901a\u8fc7\u5f00\u53d1\u8005\u6a21\u5f0f\u76f4\u63a5\u52a0\u8f7d\u3002\n\n\u5f00\u53d1\u4e2d\uff0c\u4ee3\u7801\u6709\u4efb\u4f55\u6539\u52a8\u90fd\u5fc5\u987b\u91cd\u65b0\u52a0\u8f7d\u63d2\u4ef6\uff0c\u53ea\u9700\u8981\u5728\u63d2\u4ef6\u7ba1\u7406\u9875\u6309\u4e0b`Ctrl+R`\u5373\u53ef\uff0c\u4ee5\u9632\u4e07\u4e00\u6700\u597d\u8fd8\u628a\u9875\u9762\u5237\u65b0\u4e00\u4e0b\u3002\n\n# \u6838\u5fc3\u4ecb\u7ecd\n\n## manifest.json\n\n\u8fd9\u662f\u4e00\u4e2aChrome\u63d2\u4ef6\u6700\u91cd\u8981\u4e5f\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u6587\u4ef6\uff0c\u7528\u6765\u914d\u7f6e\u6240\u6709\u548c\u63d2\u4ef6\u76f8\u5173\u7684\u914d\u7f6e\uff0c\u5fc5\u987b\u653e\u5728\u6839\u76ee\u5f55\u3002\u5176\u4e2d\uff0c`manifest_version`\u3001`name`\u3001`version`3\u4e2a\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\uff0c`description`\u548c`icons`\u662f\u63a8\u8350\u7684\u3002\n\n\u4e0b\u9762\u7ed9\u51fa\u7684\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u914d\u7f6e\u9879\uff0c\u5747\u6709\u4e2d\u6587\u6ce8\u91ca\uff0c\u5b8c\u6574\u7684\u914d\u7f6e\u6587\u6863\u8bf7\u6233[\u8fd9\u91cc](https://developer.chrome.com/extensions/manifest)\u3002\n\n```javascript\n{\n\t// \u6e05\u5355\u6587\u4ef6\u7684\u7248\u672c\uff0c\u8fd9\u4e2a\u5fc5\u987b\u5199\uff0c\u800c\u4e14\u5fc5\u987b\u662f2\n\t\"manifest_version\": 2,\n\t// \u63d2\u4ef6\u7684\u540d\u79f0\n\t\"name\": \"demo\",\n\t// \u63d2\u4ef6\u7684\u7248\u672c\n\t\"version\": \"1.0.0\",\n\t// \u63d2\u4ef6\u63cf\u8ff0\n\t\"description\": \"\u7b80\u5355\u7684Chrome\u6269\u5c55demo\",\n\t// \u56fe\u6807\uff0c\u4e00\u822c\u5077\u61d2\u5168\u90e8\u7528\u4e00\u4e2a\u5c3a\u5bf8\u7684\u4e5f\u6ca1\u95ee\u9898\n\t\"icons\":\n\t{\n\t\t\"16\": \"img/icon.png\",\n\t\t\"48\": \"img/icon.png\",\n\t\t\"128\": \"img/icon.png\"\n\t},\n\t// \u4f1a\u4e00\u76f4\u5e38\u9a7b\u7684\u540e\u53f0JS\u6216\u540e\u53f0\u9875\u9762\n\t\"background\":\n\t{\n\t\t// 2\u79cd\u6307\u5b9a\u65b9\u5f0f\uff0c\u5982\u679c\u6307\u5b9aJS\uff0c\u90a3\u4e48\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u80cc\u666f\u9875\n\t\t\"page\": \"background.html\"\n\t\t//\"scripts\": [\"js/background.js\"]\n\t},\n\t// \u6d4f\u89c8\u5668\u53f3\u4e0a\u89d2\u56fe\u6807\u8bbe\u7f6e\uff0cbrowser_action\u3001page_action\u3001app\u5fc5\u987b\u4e09\u9009\u4e00\n\t\"browser_action\": \n\t{\n\t\t\"default_icon\": \"img/icon.png\",\n\t\t// \u56fe\u6807\u60ac\u505c\u65f6\u7684\u6807\u9898\uff0c\u53ef\u9009\n\t\t\"default_title\": \"\u8fd9\u662f\u4e00\u4e2a\u793a\u4f8bChrome\u63d2\u4ef6\",\n\t\t\"default_popup\": \"popup.html\"\n\t},\n\t// \u5f53\u67d0\u4e9b\u7279\u5b9a\u9875\u9762\u6253\u5f00\u624d\u663e\u793a\u7684\u56fe\u6807\n\t/*\"page_action\":\n\t{\n\t\t\"default_icon\": \"img/icon.png\",\n\t\t\"default_title\": \"\u6211\u662fpageAction\",\n\t\t\"default_popup\": \"popup.html\"\n\t},*/\n\t// \u9700\u8981\u76f4\u63a5\u6ce8\u5165\u9875\u9762\u7684JS\n\t\"content_scripts\": \n\t[\n\t\t{\n\t\t\t//\"matches\": [\"http://*/*\", \"https://*/*\"],\n\t\t\t// \"<all_urls>\" \u8868\u793a\u5339\u914d\u6240\u6709\u5730\u5740\n\t\t\t\"matches\": [\"<all_urls>\"],\n\t\t\t// \u591a\u4e2aJS\u6309\u987a\u5e8f\u6ce8\u5165\n\t\t\t\"js\": [\"js/jquery-1.8.3.js\", \"js/content-script.js\"],\n\t\t\t// JS\u7684\u6ce8\u5165\u53ef\u4ee5\u968f\u4fbf\u4e00\u70b9\uff0c\u4f46\u662fCSS\u7684\u6ce8\u610f\u5c31\u8981\u5343\u4e07\u5c0f\u5fc3\u4e86\uff0c\u56e0\u4e3a\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u53ef\u80fd\u5f71\u54cd\u5168\u5c40\u6837\u5f0f\n\t\t\t\"css\": [\"css/custom.css\"],\n\t\t\t// \u4ee3\u7801\u6ce8\u5165\u7684\u65f6\u95f4\uff0c\u53ef\u9009\u503c\uff1a \"document_start\", \"document_end\", or \"document_idle\"\uff0c\u6700\u540e\u4e00\u4e2a\u8868\u793a\u9875\u9762\u7a7a\u95f2\u65f6\uff0c\u9ed8\u8ba4document_idle\n\t\t\t\"run_at\": \"document_start\"\n\t\t},\n\t\t// \u8fd9\u91cc\u4ec5\u4ec5\u662f\u4e3a\u4e86\u6f14\u793acontent-script\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\u89c4\u5219\n\t\t{\n\t\t\t\"matches\": [\"*://*/*.png\", \"*://*/*.jpg\", \"*://*/*.gif\", \"*://*/*.bmp\"],\n\t\t\t\"js\": [\"js/show-image-content-size.js\"]\n\t\t}\n\t],\n\t// \u6743\u9650\u7533\u8bf7\n\t\"permissions\":\n\t[\n\t\t\"contextMenus\", // \u53f3\u952e\u83dc\u5355\n\t\t\"tabs\", // \u6807\u7b7e\n\t\t\"notifications\", // \u901a\u77e5\n\t\t\"webRequest\", // web\u8bf7\u6c42\n\t\t\"webRequestBlocking\",\n\t\t\"storage\", // \u63d2\u4ef6\u672c\u5730\u5b58\u50a8\n\t\t\"http://*/*\", // \u53ef\u4ee5\u901a\u8fc7executeScript\u6216\u8005insertCSS\u8bbf\u95ee\u7684\u7f51\u7ad9\n\t\t\"https://*/*\" // \u53ef\u4ee5\u901a\u8fc7executeScript\u6216\u8005insertCSS\u8bbf\u95ee\u7684\u7f51\u7ad9\n\t],\n\t// \u666e\u901a\u9875\u9762\u80fd\u591f\u76f4\u63a5\u8bbf\u95ee\u7684\u63d2\u4ef6\u8d44\u6e90\u5217\u8868\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u662f\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u7684\n\t\"web_accessible_resources\": [\"js/inject.js\"],\n\t// \u63d2\u4ef6\u4e3b\u9875\uff0c\u8fd9\u4e2a\u5f88\u91cd\u8981\uff0c\u4e0d\u8981\u6d6a\u8d39\u4e86\u8fd9\u4e2a\u514d\u8d39\u5e7f\u544a\u4f4d\n\t\"homepage_url\": \"https://www.baidu.com\",\n\t// \u8986\u76d6\u6d4f\u89c8\u5668\u9ed8\u8ba4\u9875\u9762\n\t\"chrome_url_overrides\":\n\t{\n\t\t// \u8986\u76d6\u6d4f\u89c8\u5668\u9ed8\u8ba4\u7684\u65b0\u6807\u7b7e\u9875\n\t\t\"newtab\": \"newtab.html\"\n\t},\n\t// Chrome40\u4ee5\u524d\u7684\u63d2\u4ef6\u914d\u7f6e\u9875\u5199\u6cd5\n\t\"options_page\": \"options.html\",\n\t// Chrome40\u4ee5\u540e\u7684\u63d2\u4ef6\u914d\u7f6e\u9875\u5199\u6cd5\uff0c\u5982\u679c2\u4e2a\u90fd\u5199\uff0c\u65b0\u7248Chrome\u53ea\u8ba4\u540e\u9762\u8fd9\u4e00\u4e2a\n\t\"options_ui\":\n\t{\n\t\t\"page\": \"options.html\",\n\t\t// \u6dfb\u52a0\u4e00\u4e9b\u9ed8\u8ba4\u7684\u6837\u5f0f\uff0c\u63a8\u8350\u4f7f\u7528\n\t\t\"chrome_style\": true\n\t},\n\t// \u5411\u5730\u5740\u680f\u6ce8\u518c\u4e00\u4e2a\u5173\u952e\u5b57\u4ee5\u63d0\u4f9b\u641c\u7d22\u5efa\u8bae\uff0c\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u5173\u952e\u5b57\n\t\"omnibox\": { \"keyword\" : \"go\" },\n\t// \u9ed8\u8ba4\u8bed\u8a00\n\t\"default_locale\": \"zh_CN\",\n\t// devtools\u9875\u9762\u5165\u53e3\uff0c\u6ce8\u610f\u53ea\u80fd\u6307\u5411\u4e00\u4e2aHTML\u6587\u4ef6\uff0c\u4e0d\u80fd\u662fJS\u6587\u4ef6\n\t\"devtools_page\": \"devtools.html\"\n}\n```\n\n## content-scripts\n\n\u6240\u8c13[content-scripts](https://developer.chrome.com/extensions/content_scripts)\uff0c\u5176\u5b9e\u5c31\u662fChrome\u63d2\u4ef6\u4e2d\u5411\u9875\u9762\u6ce8\u5165\u811a\u672c\u7684\u4e00\u79cd\u5f62\u5f0f\uff08\u867d\u7136\u540d\u4e3ascript\uff0c\u5176\u5b9e\u8fd8\u53ef\u4ee5\u5305\u62eccss\u7684\uff09\uff0c\u501f\u52a9`content-scripts`\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u901a\u8fc7\u914d\u7f6e\u7684\u65b9\u5f0f\u8f7b\u677e\u5411\u6307\u5b9a\u9875\u9762\u6ce8\u5165JS\u548cCSS\uff08\u5982\u679c\u9700\u8981\u52a8\u6001\u6ce8\u5165\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u6587\uff09\uff0c\u6700\u5e38\u89c1\u7684\u6bd4\u5982\uff1a\u5e7f\u544a\u5c4f\u853d\u3001\u9875\u9762CSS\u5b9a\u5236\uff0c\u7b49\u7b49\u3002\n\n\u793a\u4f8b\u914d\u7f6e\uff1a\n\n```javascript\n{\n\t// \u9700\u8981\u76f4\u63a5\u6ce8\u5165\u9875\u9762\u7684JS\n\t\"content_scripts\": \n\t[\n\t\t{\n\t\t\t//\"matches\": [\"http://*/*\", \"https://*/*\"],\n\t\t\t// \"<all_urls>\" \u8868\u793a\u5339\u914d\u6240\u6709\u5730\u5740\n\t\t\t\"matches\": [\"<all_urls>\"],\n\t\t\t// \u591a\u4e2aJS\u6309\u987a\u5e8f\u6ce8\u5165\n\t\t\t\"js\": [\"js/jquery-1.8.3.js\", \"js/content-script.js\"],\n\t\t\t// JS\u7684\u6ce8\u5165\u53ef\u4ee5\u968f\u4fbf\u4e00\u70b9\uff0c\u4f46\u662fCSS\u7684\u6ce8\u610f\u5c31\u8981\u5343\u4e07\u5c0f\u5fc3\u4e86\uff0c\u56e0\u4e3a\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u53ef\u80fd\u5f71\u54cd\u5168\u5c40\u6837\u5f0f\n\t\t\t\"css\": [\"css/custom.css\"],\n\t\t\t// \u4ee3\u7801\u6ce8\u5165\u7684\u65f6\u95f4\uff0c\u53ef\u9009\u503c\uff1a \"document_start\", \"document_end\", or \"document_idle\"\uff0c\u6700\u540e\u4e00\u4e2a\u8868\u793a\u9875\u9762\u7a7a\u95f2\u65f6\uff0c\u9ed8\u8ba4document_idle\n\t\t\t\"run_at\": \"document_start\"\n\t\t}\n\t],\n}\n```\n\n\u7279\u522b\u6ce8\u610f\uff0c\u5982\u679c\u6ca1\u6709\u4e3b\u52a8\u6307\u5b9a`run_at`\u4e3a`document_start`\uff08\u9ed8\u8ba4\u4e3a`document_idle`\uff09\uff0c\u4e0b\u9762\u8fd9\u79cd\u4ee3\u7801\u662f\u4e0d\u4f1a\u751f\u6548\u7684\uff1a\n\n```javascript\ndocument.addEventListener('DOMContentLoaded', function()\n{\n\tconsole.log('\u6211\u88ab\u6267\u884c\u4e86\uff01');\n});\n```\n\n`content-scripts`\u548c\u539f\u59cb\u9875\u9762\u5171\u4eabDOM\uff0c\u4f46\u662f\u4e0d\u5171\u4eabJS\uff0c\u5982\u8981\u8bbf\u95ee\u9875\u9762JS\uff08\u4f8b\u5982\u67d0\u4e2aJS\u53d8\u91cf\uff09\uff0c\u53ea\u80fd\u901a\u8fc7`injected js`\u6765\u5b9e\u73b0\u3002`content-scripts`\u4e0d\u80fd\u8bbf\u95ee\u7edd\u5927\u90e8\u5206`chrome.xxx.api`\uff0c\u9664\u4e86\u4e0b\u9762\u8fd94\u79cd\uff1a\n\n* chrome.extension(getURL , inIncognitoContext , lastError , onRequest , sendRequest)\n* chrome.i18n\n* chrome.runtime(connect , getManifest , getURL , id , onConnect , onMessage , sendMessage)\n* chrome.storage\n\n\u5176\u5b9e\u770b\u5230\u8fd9\u91cc\u4e0d\u8981\u60b2\u89c2\uff0c\u8fd9\u4e9bAPI\u7edd\u5927\u90e8\u5206\u65f6\u5019\u90fd\u591f\u7528\u4e86\uff0c\u975e\u8981\u8c03\u7528\u5176\u5b83API\u7684\u8bdd\uff0c\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7\u901a\u4fe1\u6765\u5b9e\u73b0\u8ba9background\u6765\u5e2e\u4f60\u8c03\u7528\uff08\u5173\u4e8e\u901a\u4fe1\uff0c\u540e\u6587\u6709\u8be6\u7ec6\u4ecb\u7ecd\uff09\u3002\n\n\u597d\u4e86\uff0cChrome\u63d2\u4ef6\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u8fd9\u4e48\u5f3a\u5927\u7684JS\u6ce8\u5165\u529f\u80fd\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u53d1\u6325\u4f60\u7684\u60f3\u8c61\u529b\u53bb\u73a9\u5f04\u6d4f\u89c8\u5668\u4e86\u3002\n\n## background\n\n\u540e\u53f0\uff08\u59d1\u4e14\u8fd9\u4e48\u7ffb\u8bd1\u5427\uff09\uff0c\u662f\u4e00\u4e2a\u5e38\u9a7b\u7684\u9875\u9762\uff0c\u5b83\u7684\u751f\u547d\u5468\u671f\u662f\u63d2\u4ef6\u4e2d\u6240\u6709\u7c7b\u578b\u9875\u9762\u4e2d\u6700\u957f\u7684\uff0c\u5b83\u968f\u7740\u6d4f\u89c8\u5668\u7684\u6253\u5f00\u800c\u6253\u5f00\uff0c\u968f\u7740\u6d4f\u89c8\u5668\u7684\u5173\u95ed\u800c\u5173\u95ed\uff0c\u6240\u4ee5\u901a\u5e38\u628a\u9700\u8981\u4e00\u76f4\u8fd0\u884c\u7684\u3001\u542f\u52a8\u5c31\u8fd0\u884c\u7684\u3001\u5168\u5c40\u7684\u4ee3\u7801\u653e\u5728background\u91cc\u9762\u3002\n\nbackground\u7684\u6743\u9650\u975e\u5e38\u9ad8\uff0c\u51e0\u4e4e\u53ef\u4ee5\u8c03\u7528\u6240\u6709\u7684Chrome\u6269\u5c55API\uff08\u9664\u4e86devtools\uff09\uff0c\u800c\u4e14\u5b83\u53ef\u4ee5\u65e0\u9650\u5236\u8de8\u57df\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u8de8\u57df\u8bbf\u95ee\u4efb\u4f55\u7f51\u7ad9\u800c\u65e0\u9700\u8981\u6c42\u5bf9\u65b9\u8bbe\u7f6e`CORS`\u3002\n\n> \u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u5176\u5b9e\u4e0d\u6b62\u662fbackground\uff0c\u6240\u6709\u7684\u76f4\u63a5\u901a\u8fc7`chrome-extension://id/xx.html`\u8fd9\u79cd\u65b9\u5f0f\u6253\u5f00\u7684\u7f51\u9875\u90fd\u53ef\u4ee5\u65e0\u9650\u5236\u8de8\u57df\u3002\n\n\u914d\u7f6e\u4e2d\uff0c`background`\u53ef\u4ee5\u901a\u8fc7`page`\u6307\u5b9a\u4e00\u5f20\u7f51\u9875\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7`scripts`\u76f4\u63a5\u6307\u5b9a\u4e00\u4e2aJS\uff0cChrome\u4f1a\u81ea\u52a8\u4e3a\u8fd9\u4e2aJS\u751f\u6210\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7f51\u9875\uff1a\n\n```javascript\n{\n\t// \u4f1a\u4e00\u76f4\u5e38\u9a7b\u7684\u540e\u53f0JS\u6216\u540e\u53f0\u9875\u9762\n\t\"background\":\n\t{\n\t\t// 2\u79cd\u6307\u5b9a\u65b9\u5f0f\uff0c\u5982\u679c\u6307\u5b9aJS\uff0c\u90a3\u4e48\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u80cc\u666f\u9875\n\t\t\"page\": \"background.html\"\n\t\t//\"scripts\": [\"js/background.js\"]\n\t},\n}\n```\n\n\u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\uff0c\u867d\u7136\u4f60\u53ef\u4ee5\u901a\u8fc7`chrome-extension://xxx/background.html`\u76f4\u63a5\u6253\u5f00\u540e\u53f0\u9875\uff0c\u4f46\u662f\u4f60\u6253\u5f00\u7684\u540e\u53f0\u9875\u548c\u771f\u6b63\u4e00\u76f4\u5728\u540e\u53f0\u8fd0\u884c\u7684\u90a3\u4e2a\u9875\u9762\u4e0d\u662f\u540c\u4e00\u4e2a\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u4f60\u53ef\u4ee5\u6253\u5f00\u65e0\u6570\u4e2a`background.html`\uff0c\u4f46\u662f\u771f\u6b63\u5728\u540e\u53f0\u5e38\u9a7b\u7684\u53ea\u6709\u4e00\u4e2a\uff0c\u800c\u4e14\u8fd9\u4e2a\u4f60\u6c38\u8fdc\u770b\u4e0d\u5230\u5b83\u7684\u754c\u9762\uff0c\u53ea\u80fd\u8c03\u8bd5\u5b83\u7684\u4ee3\u7801\u3002\n\n## event-pages\n\n\u8fd9\u91cc\u987a\u5e26\u4ecb\u7ecd\u4e00\u4e0b[event-pages](https://developer.chrome.com/extensions/event_pages)\uff0c\u5b83\u662f\u4e00\u4e2a\u4ec0\u4e48\u4e1c\u897f\u5462\uff1f\u9274\u4e8ebackground\u751f\u547d\u5468\u671f\u592a\u957f\uff0c\u957f\u65f6\u95f4\u6302\u8f7d\u540e\u53f0\u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd\uff0c\u6240\u4ee5Google\u53c8\u5f04\u4e00\u4e2a`event-pages`\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e0a\uff0c\u5b83\u4e0ebackground\u7684\u552f\u4e00\u533a\u522b\u5c31\u662f\u591a\u4e86\u4e00\u4e2a`persistent`\u53c2\u6570\uff1a\n\n```javascript\n{\n\t\"background\":\n\t{\n\t\t\"scripts\": [\"event-page.js\"],\n\t\t\"persistent\": false\n\t},\n}\n```\n\n\u5b83\u7684\u751f\u547d\u5468\u671f\u662f\uff1a\u5728\u88ab\u9700\u8981\u65f6\u52a0\u8f7d\uff0c\u5728\u7a7a\u95f2\u65f6\u88ab\u5173\u95ed\uff0c\u4ec0\u4e48\u53eb\u88ab\u9700\u8981\u65f6\u5462\uff1f\u6bd4\u5982\u7b2c\u4e00\u6b21\u5b89\u88c5\u3001\u63d2\u4ef6\u66f4\u65b0\u3001\u6709content-script\u5411\u5b83\u53d1\u9001\u6d88\u606f\uff0c\u7b49\u7b49\u3002\n\n\u9664\u4e86\u914d\u7f6e\u6587\u4ef6\u7684\u53d8\u5316\uff0c\u4ee3\u7801\u4e0a\u4e5f\u6709\u4e00\u4e9b\u7ec6\u5fae\u53d8\u5316\uff0c\u4e2a\u4eba\u8fd9\u4e2a\u7b80\u5355\u4e86\u89e3\u4e00\u4e0b\u5c31\u884c\u4e86\uff0c\u4e00\u822c\u60c5\u51b5\u4e0bbackground\u4e5f\u4e0d\u4f1a\u5f88\u6d88\u8017\u6027\u80fd\u7684\u3002\n\n## popup\n\n`popup`\u662f\u70b9\u51fb`browser_action`\u6216\u8005`page_action`\u56fe\u6807\u65f6\u6253\u5f00\u7684\u4e00\u4e2a\u5c0f\u7a97\u53e3\u7f51\u9875\uff0c\u7126\u70b9\u79bb\u5f00\u7f51\u9875\u5c31\u7acb\u5373\u5173\u95ed\uff0c\u4e00\u822c\u7528\u6765\u505a\u4e00\u4e9b\u4e34\u65f6\u6027\u7684\u4ea4\u4e92\u3002\n\n![\u535a\u5ba2\u56ed\u7f51\u6458\u63d2\u4ef6popup\u6548\u679c](http://image.liuxianan.com/201706/20170619_161102_335_9254.png)\n\n`popup`\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u4f60\u60f3\u8981\u7684HTML\u5185\u5bb9\uff0c\u5e76\u4e14\u4f1a\u81ea\u9002\u5e94\u5927\u5c0f\u3002\u53ef\u4ee5\u901a\u8fc7`default_popup`\u5b57\u6bb5\u6765\u6307\u5b9apopup\u9875\u9762\uff0c\u4e5f\u53ef\u4ee5\u8c03\u7528`setPopup()`\u65b9\u6cd5\u3002\n\n\u914d\u7f6e\u65b9\u5f0f\uff1a\n\n```javascript\n{\n\t\"browser_action\":\n\t{\n\t\t\"default_icon\": \"img/icon.png\",\n\t\t// \u56fe\u6807\u60ac\u505c\u65f6\u7684\u6807\u9898\uff0c\u53ef\u9009\n\t\t\"default_title\": \"\u8fd9\u662f\u4e00\u4e2a\u793a\u4f8bChrome\u63d2\u4ef6\",\n\t\t\"default_popup\": \"popup.html\"\n\t}\n}\n```\n\n![](http://image.liuxianan.com/201705/20170531_172243_007_2793.png)\n\n\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u5355\u51fb\u56fe\u6807\u6253\u5f00popup\uff0c\u7126\u70b9\u79bb\u5f00\u53c8\u7acb\u5373\u5173\u95ed\uff0c\u6240\u4ee5popup\u9875\u9762\u7684\u751f\u547d\u5468\u671f\u4e00\u822c\u5f88\u77ed\uff0c\u9700\u8981\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4ee3\u7801\u5343\u4e07\u4e0d\u8981\u5199\u5728popup\u91cc\u9762\u3002\n\n\u5728\u6743\u9650\u4e0a\uff0c\u5b83\u548cbackground\u975e\u5e38\u7c7b\u4f3c\uff0c\u5b83\u4eec\u4e4b\u95f4\u6700\u5927\u7684\u4e0d\u540c\u662f\u751f\u547d\u5468\u671f\u7684\u4e0d\u540c\uff0cpopup\u4e2d\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7`chrome.extension.getBackgroundPage()`\u83b7\u53d6background\u7684window\u5bf9\u8c61\u3002\n\n## injected-script\n\n\u8fd9\u91cc\u7684`injected-script`\u662f\u6211\u7ed9\u5b83\u53d6\u7684\uff0c\u6307\u7684\u662f\u901a\u8fc7DOM\u64cd\u4f5c\u7684\u65b9\u5f0f\u5411\u9875\u9762\u6ce8\u5165\u7684\u4e00\u79cdJS\u3002\u4e3a\u4ec0\u4e48\u8981\u628a\u8fd9\u79cdJS\u5355\u72ec\u62ff\u51fa\u6765\u8ba8\u8bba\u5462\uff1f\u53c8\u6216\u8005\u8bf4\u4e3a\u4ec0\u4e48\u9700\u8981\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6ce8\u5165JS\u5462\uff1f\n\n\u8fd9\u662f\u56e0\u4e3a`content-script`\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u201c\u7f3a\u9677\u201d\uff0c\u4e5f\u5c31\u662f\u65e0\u6cd5\u8bbf\u95ee\u9875\u9762\u4e2d\u7684JS\uff0c\u867d\u7136\u5b83\u53ef\u4ee5\u64cd\u4f5cDOM\uff0c\u4f46\u662fDOM\u5374\u4e0d\u80fd\u8c03\u7528\u5b83\uff0c\u4e5f\u5c31\u662f\u65e0\u6cd5\u5728DOM\u4e2d\u901a\u8fc7\u7ed1\u5b9a\u4e8b\u4ef6\u7684\u65b9\u5f0f\u8c03\u7528`content-script`\u4e2d\u7684\u4ee3\u7801\uff08\u5305\u62ec\u76f4\u63a5\u5199`onclick`\u548c`addEventListener`2\u79cd\u65b9\u5f0f\u90fd\u4e0d\u884c\uff09\uff0c\u4f46\u662f\uff0c\u201c\u5728\u9875\u9762\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u6309\u94ae\u5e76\u8c03\u7528\u63d2\u4ef6\u7684\u6269\u5c55API\u201d\u662f\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u90a3\u8be5\u600e\u4e48\u529e\u5462\uff1f\u5176\u5b9e\u8fd9\u5c31\u662f\u672c\u5c0f\u8282\u8981\u8bb2\u7684\u3002\n\n\u5728`content-script`\u4e2d\u901a\u8fc7DOM\u65b9\u5f0f\u5411\u9875\u9762\u6ce8\u5165`inject-script`\u4ee3\u7801\u793a\u4f8b\uff1a\n\n```javascript\n// \u5411\u9875\u9762\u6ce8\u5165JS\nfunction injectCustomJs(jsPath)\n{\n\tjsPath = jsPath || 'js/inject.js';\n\tvar temp = document.createElement('script');\n\ttemp.setAttribute('type', 'text/javascript');\n\t// \u83b7\u5f97\u7684\u5730\u5740\u7c7b\u4f3c\uff1achrome-extension://ihcokhadfjfchaeagdoclpnjdiokfakg/js/inject.js\n\ttemp.src = chrome.extension.getURL(jsPath);\n\ttemp.onload = function()\n\t{\n\t\t// \u653e\u5728\u9875\u9762\u4e0d\u597d\u770b\uff0c\u6267\u884c\u5b8c\u540e\u79fb\u9664\u6389\n\t\tthis.parentNode.removeChild(this);\n\t};\n\tdocument.head.appendChild(temp);\n}\n```\n\n\u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u884c\u4e86\uff1f\u6267\u884c\u4e00\u4e0b\u4f60\u4f1a\u770b\u5230\u5982\u4e0b\u62a5\u9519\uff1a\n\n\tDenying load of chrome-extension://efbllncjkjiijkppagepehoekjojdclc/js/inject.js. Resources must be listed in the web_accessible_resources manifest key in order to be loaded by pages outside the extension.\n\n\u610f\u601d\u5c31\u662f\u4f60\u60f3\u8981\u5728web\u4e2d\u76f4\u63a5\u8bbf\u95ee\u63d2\u4ef6\u4e2d\u7684\u8d44\u6e90\u7684\u8bdd\u5fc5\u987b\u663e\u793a\u58f0\u660e\u624d\u884c\uff0c\u914d\u7f6e\u6587\u4ef6\u4e2d\u589e\u52a0\u5982\u4e0b\uff1a\n\n```javascript\n{\n\t// \u666e\u901a\u9875\u9762\u80fd\u591f\u76f4\u63a5\u8bbf\u95ee\u7684\u63d2\u4ef6\u8d44\u6e90\u5217\u8868\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u662f\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u7684\n\t\"web_accessible_resources\": [\"js/inject.js\"],\n}\n```\n\n\u81f3\u4e8e`inject-script`\u5982\u4f55\u8c03\u7528`content-script`\u4e2d\u7684\u4ee3\u7801\uff0c\u540e\u9762\u6211\u4f1a\u5728\u4e13\u95e8\u7684\u4e00\u4e2a\u6d88\u606f\u901a\u4fe1\u7ae0\u8282\u8be6\u7ec6\u4ecb\u7ecd\u3002\n\n## homepage_url\n\n\u5f00\u53d1\u8005\u6216\u8005\u63d2\u4ef6\u4e3b\u9875\u8bbe\u7f6e\uff0c\u4e00\u822c\u4f1a\u5728\u5982\u4e0b2\u4e2a\u5730\u65b9\u663e\u793a\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_105821_586_0442.png)\n\n![](http://image.liuxianan.com/201705/20170531_105907_256_9087.png)\n\n# Chrome\u63d2\u4ef6\u76848\u79cd\u5c55\u793a\u5f62\u5f0f\n\n## browserAction(\u6d4f\u89c8\u5668\u53f3\u4e0a\u89d2)\n\n\u901a\u8fc7\u914d\u7f6e`browser_action`\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u7684\u53f3\u4e0a\u89d2\u589e\u52a0\u4e00\u4e2a\u56fe\u6807\uff0c\u4e00\u4e2a`browser_action`\u53ef\u4ee5\u62e5\u6709\u4e00\u4e2a\u56fe\u6807\uff0c\u4e00\u4e2a`tooltip`\uff0c\u4e00\u4e2a`badge`\u548c\u4e00\u4e2a`popup`\u3002\n\n\u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a\n\n```json\n\"browser_action\":\n{\n\t\"default_icon\": \"img/icon.png\",\n\t\"default_title\": \"\u8fd9\u662f\u4e00\u4e2a\u793a\u4f8bChrome\u63d2\u4ef6\",\n\t\"default_popup\": \"popup.html\"\n}\n```\n\n### \u56fe\u6807\n\n`browser_action`\u56fe\u6807\u63a8\u8350\u4f7f\u7528\u5bbd\u9ad8\u90fd\u4e3a19\u50cf\u7d20\u7684\u56fe\u7247\uff0c\u66f4\u5927\u7684\u56fe\u6807\u4f1a\u88ab\u7f29\u5c0f\uff0c\u683c\u5f0f\u968f\u610f\uff0c\u4e00\u822c\u63a8\u8350png\uff0c\u53ef\u4ee5\u901a\u8fc7manifest\u4e2d`default_icon`\u5b57\u6bb5\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u8c03\u7528setIcon()\u65b9\u6cd5\u3002\n\n### tooltip\n\n\u4fee\u6539`browser_action`\u7684manifest\u4e2d`default_title`\u5b57\u6bb5\uff0c\u6216\u8005\u8c03\u7528`setTitle()`\u65b9\u6cd5\u3002\n\n![](http://image.liuxianan.com/201705/20170531_170829_477_1329.png)\n\n### badge\n\n\u6240\u8c13`badge`\u5c31\u662f\u5728\u56fe\u6807\u4e0a\u663e\u793a\u4e00\u4e9b\u6587\u672c\uff0c\u53ef\u4ee5\u7528\u6765\u66f4\u65b0\u4e00\u4e9b\u5c0f\u7684\u6269\u5c55\u72b6\u6001\u63d0\u793a\u4fe1\u606f\u3002\u56e0\u4e3abadge\u7a7a\u95f4\u6709\u9650\uff0c\u6240\u4ee5\u53ea\u652f\u63014\u4e2a\u4ee5\u4e0b\u7684\u5b57\u7b26\uff08\u82f1\u65874\u4e2a\uff0c\u4e2d\u65872\u4e2a\uff09\u3002badge\u65e0\u6cd5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u6765\u6307\u5b9a\uff0c\u5fc5\u987b\u901a\u8fc7\u4ee3\u7801\u5b9e\u73b0\uff0c\u8bbe\u7f6ebadge\u6587\u5b57\u548c\u989c\u8272\u53ef\u4ee5\u5206\u522b\u4f7f\u7528`setBadgeText()`\u548c`setBadgeBackgroundColor()`\u3002\n\n```javascript\nchrome.browserAction.setBadgeText({text: 'new'});\nchrome.browserAction.setBadgeBackgroundColor({color: [255, 0, 0, 255]});\n```\n\n\u6548\u679c\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_171447_912_1165.png)\n\n## pageAction(\u5730\u5740\u680f\u53f3\u4fa7)\n\n\u6240\u8c13`pageAction`\uff0c\u6307\u7684\u662f\u53ea\u6709\u5f53\u67d0\u4e9b\u7279\u5b9a\u9875\u9762\u6253\u5f00\u624d\u663e\u793a\u7684\u56fe\u6807\uff0c\u5b83\u548c`browserAction`\u6700\u5927\u7684\u533a\u522b\u662f\u4e00\u4e2a\u59cb\u7ec8\u90fd\u663e\u793a\uff0c\u4e00\u4e2a\u53ea\u5728\u7279\u5b9a\u60c5\u51b5\u624d\u663e\u793a\u3002\n\n\u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\u65e9\u4e9b\u7248\u672c\u7684Chrome\u662f\u5c06pageAction\u653e\u5728\u5730\u5740\u680f\u7684\u6700\u53f3\u8fb9\uff0c\u5de6\u952e\u5355\u51fb\u5f39\u51fapopup\uff0c\u53f3\u952e\u5355\u51fb\u5219\u5f39\u51fa\u76f8\u5173\u9ed8\u8ba4\u7684\u9009\u9879\u83dc\u5355\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_103311_849_4399.png)\n\n\u800c\u65b0\u7248\u7684Chrome\u66f4\u6539\u4e86\u8fd9\u4e00\u7b56\u7565\uff0cpageAction\u548c\u666e\u901a\u7684browserAction\u4e00\u6837\u4e5f\u662f\u653e\u5728\u6d4f\u89c8\u5668\u53f3\u4e0a\u89d2\uff0c\u53ea\u4e0d\u8fc7\u6ca1\u6709\u70b9\u4eae\u65f6\u662f\u7070\u8272\u7684\uff0c\u70b9\u4eae\u4e86\u624d\u662f\u5f69\u8272\u7684\uff0c\u7070\u8272\u65f6\u65e0\u8bba\u5de6\u952e\u8fd8\u662f\u53f3\u952e\u5355\u51fb\u90fd\u662f\u5f39\u51fa\u9009\u9879\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_104038_208_9352.gif)\n\n> \u5177\u4f53\u662f\u4ece\u54ea\u4e00\u7248\u672c\u5f00\u59cb\u6539\u7684\u6ca1\u53bb\u4ed4\u7ec6\u8003\u7a76\uff0c\u53cd\u6b63\u77e5\u9053v50.0\u7684\u65f6\u5019\u8fd8\u662f\u524d\u8005\uff0cv58.0\u7684\u65f6\u5019\u5df2\u6539\u4e3a\u540e\u8005\u3002\n\n\u8c03\u6574\u4e4b\u540e\u7684`pageAction`\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u628a\u5b83\u770b\u6210\u662f\u53ef\u4ee5\u7f6e\u7070\u7684`browserAction`\u3002\n\n* chrome.pageAction.show(tabId) \u663e\u793a\u56fe\u6807\uff1b\n* chrome.pageAction.hide(tabId) \u9690\u85cf\u56fe\u6807\uff1b\n\n\u793a\u4f8b(\u53ea\u6709\u6253\u5f00\u767e\u5ea6\u624d\u663e\u793a\u56fe\u6807)\uff1a\n\n```javascript\n// manifest.json\n{\n\t\"page_action\":\n\t{\n\t\t\"default_icon\": \"img/icon.png\",\n\t\t\"default_title\": \"\u6211\u662fpageAction\",\n\t\t\"default_popup\": \"popup.html\"\n\t},\n\t\"permissions\": [\"declarativeContent\"]\n}\n\n// background.js\nchrome.runtime.onInstalled.addListener(function(){\n\tchrome.declarativeContent.onPageChanged.removeRules(undefined, function(){\n\t\tchrome.declarativeContent.onPageChanged.addRules([\n\t\t\t{\n\t\t\t\tconditions: [\n\t\t\t\t\t// \u53ea\u6709\u6253\u5f00\u767e\u5ea6\u624d\u663e\u793apageAction\n\t\t\t\t\tnew chrome.declarativeContent.PageStateMatcher({pageUrl: {urlContains: 'baidu.com'}})\n\t\t\t\t],\n\t\t\t\tactions: [new chrome.declarativeContent.ShowPageAction()]\n\t\t\t}\n\t\t]);\n\t});\n});\n```\n\n\u6548\u679c\u56fe\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_174018_541_0451.gif)\n\n## \u53f3\u952e\u83dc\u5355\n\n\u901a\u8fc7\u5f00\u53d1Chrome\u63d2\u4ef6\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6d4f\u89c8\u5668\u7684\u53f3\u952e\u83dc\u5355\uff0c\u4e3b\u8981\u662f\u901a\u8fc7`chrome.contextMenus`API\u5b9e\u73b0\uff0c\u53f3\u952e\u83dc\u5355\u53ef\u4ee5\u51fa\u73b0\u5728\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\uff0c\u6bd4\u5982\u666e\u901a\u9875\u9762\u3001\u9009\u4e2d\u7684\u6587\u5b57\u3001\u56fe\u7247\u3001\u94fe\u63a5\uff0c\u7b49\u7b49\uff0c\u5982\u679c\u6709\u540c\u4e00\u4e2a\u63d2\u4ef6\u91cc\u9762\u5b9a\u4e49\u4e86\u591a\u4e2a\u83dc\u5355\uff0cChrome\u4f1a\u81ea\u52a8\u7ec4\u5408\u653e\u5230\u4ee5\u63d2\u4ef6\u540d\u5b57\u547d\u540d\u7684\u4e8c\u7ea7\u83dc\u5355\u91cc\uff0c\u5982\u4e0b\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_151134_967_0243.png)\n\n### \u6700\u7b80\u5355\u7684\u53f3\u952e\u83dc\u5355\u793a\u4f8b\n\n```javascript\n// manifest.json\n{\"permissions\": [\"contextMenus\"]}\n\n// background.js\nchrome.contextMenus.create({\n\ttitle: \"\u6d4b\u8bd5\u53f3\u952e\u83dc\u5355\",\n\tonclick: function(){alert('\u60a8\u70b9\u51fb\u4e86\u53f3\u952e\u83dc\u5355\uff01');}\n});\n```\n\n\u6548\u679c\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_145957_183_0527.png)\n\n### \u6dfb\u52a0\u53f3\u952e\u767e\u5ea6\u641c\u7d22\n\n```javascript\n// manifest.json\n{\"permissions\": [\"contextMenus\"\uff0c \"tabs\"]}\n\n// background.js\nchrome.contextMenus.create({\n\ttitle: '\u4f7f\u7528\u5ea6\u5a18\u641c\u7d22\uff1a%s', // %s\u8868\u793a\u9009\u4e2d\u7684\u6587\u5b57\n\tcontexts: ['selection'], // \u53ea\u6709\u5f53\u9009\u4e2d\u6587\u5b57\u65f6\u624d\u4f1a\u51fa\u73b0\u6b64\u53f3\u952e\u83dc\u5355\n\tonclick: function(params)\n\t{\n\t\t// \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528location.href\uff0c\u56e0\u4e3alocation\u662f\u5c5e\u4e8ebackground\u7684window\u5bf9\u8c61\n\t\tchrome.tabs.create({url: 'https://www.baidu.com/s?ie=utf-8&wd=' + encodeURI(params.selectionText)});\n\t}\n});\n```\n\n\u6548\u679c\u5982\u4e0b\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_160358_202_7248.png)\n\n### \u8bed\u6cd5\u8bf4\u660e\n\n\u8fd9\u91cc\u53ea\u662f\u7b80\u5355\u5217\u4e3e\u4e00\u4e9b\u5e38\u7528\u7684\uff0c\u5b8c\u6574API\u53c2\u89c1\uff1ahttps://developer.chrome.com/extensions/contextMenus\n\n```javascript\nchrome.contextMenus.create({\n\ttype: 'normal'\uff0c // \u7c7b\u578b\uff0c\u53ef\u9009\uff1a[\"normal\", \"checkbox\", \"radio\", \"separator\"]\uff0c\u9ed8\u8ba4 normal\n\ttitle: '\u83dc\u5355\u7684\u540d\u5b57', // \u663e\u793a\u7684\u6587\u5b57\uff0c\u9664\u975e\u4e3a\u201cseparator\u201d\u7c7b\u578b\u5426\u5219\u6b64\u53c2\u6570\u5fc5\u9700\uff0c\u5982\u679c\u7c7b\u578b\u4e3a\u201cselection\u201d\uff0c\u53ef\u4ee5\u4f7f\u7528%s\u663e\u793a\u9009\u5b9a\u7684\u6587\u672c\n\tcontexts: ['page'], // \u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u53ef\u9009\uff1a[\"all\", \"page\", \"frame\", \"selection\", \"link\", \"editable\", \"image\", \"video\", \"audio\"]\uff0c\u9ed8\u8ba4page\n\tonclick: function(){}, // \u5355\u51fb\u65f6\u89e6\u53d1\u7684\u65b9\u6cd5\n\tparentId: 1, // \u53f3\u952e\u83dc\u5355\u9879\u7684\u7236\u83dc\u5355\u9879ID\u3002\u6307\u5b9a\u7236\u83dc\u5355\u9879\u5c06\u4f1a\u4f7f\u6b64\u83dc\u5355\u9879\u6210\u4e3a\u7236\u83dc\u5355\u9879\u7684\u5b50\u83dc\u5355\n\tdocumentUrlPatterns: 'https://*.baidu.com/*' // \u53ea\u5728\u67d0\u4e9b\u9875\u9762\u663e\u793a\u6b64\u53f3\u952e\u83dc\u5355\n});\n// \u5220\u9664\u67d0\u4e00\u4e2a\u83dc\u5355\u9879\nchrome.contextMenus.remove(menuItemId)\uff1b\n// \u5220\u9664\u6240\u6709\u81ea\u5b9a\u4e49\u53f3\u952e\u83dc\u5355\nchrome.contextMenus.removeAll();\n// \u66f4\u65b0\u67d0\u4e00\u4e2a\u83dc\u5355\u9879\nchrome.contextMenus.update(menuItemId, updateProperties);\n```\n\n## override(\u8986\u76d6\u7279\u5b9a\u9875\u9762)\n\n\u4f7f\u7528`override`\u9875\u53ef\u4ee5\u5c06Chrome\u9ed8\u8ba4\u7684\u4e00\u4e9b\u7279\u5b9a\u9875\u9762\u66ff\u6362\u6389\uff0c\u6539\u4e3a\u4f7f\u7528\u6269\u5c55\u63d0\u4f9b\u7684\u9875\u9762\u3002\n\n\u6269\u5c55\u53ef\u4ee5\u66ff\u4ee3\u5982\u4e0b\u9875\u9762\uff1a\n\n* \u5386\u53f2\u8bb0\u5f55\uff1a\u4ece\u5de5\u5177\u83dc\u5355\u4e0a\u70b9\u51fb\u5386\u53f2\u8bb0\u5f55\u65f6\u8bbf\u95ee\u7684\u9875\u9762\uff0c\u6216\u8005\u4ece\u5730\u5740\u680f\u76f4\u63a5\u8f93\u5165 [chrome://history](chrome://history)\n* \u65b0\u6807\u7b7e\u9875\uff1a\u5f53\u521b\u5efa\u65b0\u6807\u7b7e\u7684\u65f6\u5019\u8bbf\u95ee\u7684\u9875\u9762\uff0c\u6216\u8005\u4ece\u5730\u5740\u680f\u76f4\u63a5\u8f93\u5165 [chrome://newtab](chrome://newtab)\n* \u4e66\u7b7e\uff1a\u6d4f\u89c8\u5668\u7684\u4e66\u7b7e\uff0c\u6216\u8005\u76f4\u63a5\u8f93\u5165 [chrome://bookmarks](chrome://bookmarks)\n\n\u6ce8\u610f\uff1a\n\n* \u4e00\u4e2a\u6269\u5c55\u53ea\u80fd\u66ff\u4ee3\u4e00\u4e2a\u9875\u9762\uff1b\n* \u4e0d\u80fd\u66ff\u4ee3\u9690\u8eab\u7a97\u53e3\u7684\u65b0\u6807\u7b7e\u9875\uff1b\n* \u7f51\u9875\u5fc5\u987b\u8bbe\u7f6etitle\uff0c\u5426\u5219\u7528\u6237\u53ef\u80fd\u4f1a\u770b\u5230\u7f51\u9875\u7684URL\uff0c\u9020\u6210\u56f0\u6270\uff1b\n\n\u4e0b\u9762\u7684\u622a\u56fe\u662f\u9ed8\u8ba4\u7684\u65b0\u6807\u7b7e\u9875\u548c\u88ab\u6269\u5c55\u66ff\u6362\u6389\u7684\u65b0\u6807\u7b7e\u9875\u3002\n\n![](http://image.liuxianan.com/201705/20170531_180326_487_3396.png)\n\n\u4ee3\u7801\uff08\u6ce8\u610f\uff0c\u4e00\u4e2a\u63d2\u4ef6\u53ea\u80fd\u66ff\u4ee3\u4e00\u4e2a\u9ed8\u8ba4\u9875\uff0c\u4ee5\u4e0b\u4ec5\u4e3a\u6f14\u793a\uff09\uff1a\n\n```javascript\n\"chrome_url_overrides\":\n{\n\t\"newtab\": \"newtab.html\",\n\t\"history\": \"history.html\",\n\t\"bookmarks\": \"bookmarks.html\"\n}\n```\n\n## devtools(\u5f00\u53d1\u8005\u5de5\u5177)\n\n### \u9884\u70ed\n\n\u4f7f\u7528\u8fc7vue\u7684\u5e94\u8be5\u89c1\u8fc7\u8fd9\u79cd\u7c7b\u578b\u7684\u63d2\u4ef6\uff1a\n\n![](http://image.liuxianan.com/201706/20170605_181456_375_7033.png)\n\n\u662f\u7684\uff0cChrome\u5141\u8bb8\u63d2\u4ef6\u5728\u5f00\u53d1\u8005\u5de5\u5177(devtools)\u4e0a\u52a8\u624b\u811a\uff0c\u4e3b\u8981\u8868\u73b0\u5728\uff1a\n\n* \u81ea\u5b9a\u4e49\u4e00\u4e2a\u548c\u591a\u4e2a\u548c`Elements`\u3001`Console`\u3001`Sources`\u7b49\u540c\u7ea7\u522b\u7684\u9762\u677f\uff1b\n* \u81ea\u5b9a\u4e49\u4fa7\u8fb9\u680f(sidebar)\uff0c\u76ee\u524d\u53ea\u80fd\u81ea\u5b9a\u4e49`Elements`\u9762\u677f\u7684\u4fa7\u8fb9\u680f\uff1b\n\n\u5148\u6765\u770b2\u5f20\u7b80\u5355\u7684demo\u622a\u56fe\uff0c\u81ea\u5b9a\u4e49\u9762\u677f\uff08\u5224\u65ad\u5f53\u524d\u9875\u9762\u662f\u5426\u4f7f\u7528\u4e86jQuery\uff09\uff1a\n\n![](http://image.liuxianan.com/201706/20170613_220126_669_2411.png)\n\n\u81ea\u5b9a\u4e49\u4fa7\u8fb9\u680f\uff08\u83b7\u53d6\u5f53\u524d\u9875\u9762\u6240\u6709\u56fe\u7247\uff09\uff1a\n\n![](http://image.liuxianan.com/201706/20170605_175952_228_8829.png)\n\n### devtools\u6269\u5c55\u4ecb\u7ecd\n\n\u4e3b\u9875\uff1ahttps://developer.chrome.com/extensions/devtools\n\n\u6765\u4e00\u5f20\u5b98\u65b9\u56fe\u7247\uff1a\n\n![](http://image.liuxianan.com/201706/20170606_170623_349_6923.png)\n\n\u6bcf\u6253\u5f00\u4e00\u4e2a\u5f00\u53d1\u8005\u5de5\u5177\u7a97\u53e3\uff0c\u90fd\u4f1a\u521b\u5efadevtools\u9875\u9762\u7684\u5b9e\u4f8b\uff0cF12\u7a97\u53e3\u5173\u95ed\uff0c\u9875\u9762\u4e5f\u968f\u7740\u5173\u95ed\uff0c\u6240\u4ee5devtools\u9875\u9762\u7684\u751f\u547d\u5468\u671f\u548cdevtools\u7a97\u53e3\u662f\u4e00\u81f4\u7684\u3002devtools\u9875\u9762\u53ef\u4ee5\u8bbf\u95ee\u4e00\u7ec4\u7279\u6709\u7684`DevTools API`\u4ee5\u53ca\u6709\u9650\u7684\u6269\u5c55API\uff0c\u8fd9\u7ec4\u7279\u6709\u7684`DevTools API`\u53ea\u6709devtools\u9875\u9762\u624d\u53ef\u4ee5\u8bbf\u95ee\uff0cbackground\u90fd\u65e0\u6743\u8bbf\u95ee\uff0c\u8fd9\u4e9bAPI\u5305\u62ec\uff1a\n\n* `chrome.devtools.panels`\uff1a\u9762\u677f\u76f8\u5173\uff1b\n* `chrome.devtools.inspectedWindow`\uff1a\u83b7\u53d6\u88ab\u5ba1\u67e5\u7a97\u53e3\u7684\u6709\u5173\u4fe1\u606f\uff1b\n* `chrome.devtools.network`\uff1a\u83b7\u53d6\u6709\u5173\u7f51\u7edc\u8bf7\u6c42\u7684\u4fe1\u606f\uff1b\n\n\u5927\u90e8\u5206\u6269\u5c55API\u90fd\u65e0\u6cd5\u76f4\u63a5\u88ab`DevTools`\u9875\u9762\u8c03\u7528\uff0c\u4f46\u5b83\u53ef\u4ee5\u50cf`content-script`\u4e00\u6837\u76f4\u63a5\u8c03\u7528`chrome.extension`\u548c`chrome.runtime`API\uff0c\u540c\u65f6\u5b83\u4e5f\u53ef\u4ee5\u50cf`content-script`\u4e00\u6837\u4f7f\u7528Message\u4ea4\u4e92\u7684\u65b9\u5f0f\u4e0ebackground\u9875\u9762\u8fdb\u884c\u901a\u4fe1\u3002\n\n### \u5b9e\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2adevtools\u6269\u5c55\n\n\u9996\u5148\uff0c\u8981\u9488\u5bf9\u5f00\u53d1\u8005\u5de5\u5177\u5f00\u53d1\u63d2\u4ef6\uff0c\u9700\u8981\u5728\u6e05\u5355\u6587\u4ef6\u58f0\u660e\u5982\u4e0b\uff1a\n\n```javascript\n{\n\t// \u53ea\u80fd\u6307\u5411\u4e00\u4e2aHTML\u6587\u4ef6\uff0c\u4e0d\u80fd\u662fJS\u6587\u4ef6\n\t\"devtools_page\": \"devtools.html\"\n}\n```\n\n\u8fd9\u4e2a`devtools.html`\u91cc\u9762\u4e00\u822c\u4ec0\u4e48\u90fd\u6ca1\u6709\uff0c\u5c31\u5f15\u5165\u4e00\u4e2ajs\uff1a\n\n```html\n<!DOCTYPE html>\n<html>\n<head></head>\n<body>\n\t<script type=\"text/javascript\" src=\"js/devtools.js\"></script>\n</body>\n</html>\n```\n\n\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u5176\u5b9e\u771f\u6b63\u4ee3\u7801\u662f`devtools.js`\uff0chtml\u6587\u4ef6\u662f\u201c\u591a\u4f59\u201d\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u89c9\u5f97\u6709\u70b9\u5751\uff0c`devtools_page`\u5e72\u561b\u4e0d\u5141\u8bb8\u76f4\u63a5\u6307\u5b9aJS\u5462\uff1f\n\n\u518d\u6765\u770bdevtools.js\u7684\u4ee3\u7801\uff1a\n\n```javascript\n// \u521b\u5efa\u81ea\u5b9a\u4e49\u9762\u677f\uff0c\u540c\u4e00\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u81ea\u5b9a\u4e49\u9762\u677f\n// \u51e0\u4e2a\u53c2\u6570\u4f9d\u6b21\u4e3a\uff1apanel\u6807\u9898\u3001\u56fe\u6807\uff08\u5176\u5b9e\u8bbe\u7f6e\u4e86\u4e5f\u6ca1\u5730\u65b9\u663e\u793a\uff09\u3001\u8981\u52a0\u8f7d\u7684\u9875\u9762\u3001\u52a0\u8f7d\u6210\u529f\u540e\u7684\u56de\u8c03\nchrome.devtools.panels.create('MyPanel', 'img/icon.png', 'mypanel.html', function(panel)\n{\n\tconsole.log('\u81ea\u5b9a\u4e49\u9762\u677f\u521b\u5efa\u6210\u529f\uff01'); // \u6ce8\u610f\u8fd9\u4e2alog\u4e00\u822c\u770b\u4e0d\u5230\n});\n\n// \u521b\u5efa\u81ea\u5b9a\u4e49\u4fa7\u8fb9\u680f\nchrome.devtools.panels.elements.createSidebarPane(\"Images\", function(sidebar)\n{\n\t// sidebar.setPage('../sidebar.html'); // \u6307\u5b9a\u52a0\u8f7d\u67d0\u4e2a\u9875\u9762\n\tsidebar.setExpression('document.querySelectorAll(\"img\")', 'All Images'); // \u901a\u8fc7\u8868\u8fbe\u5f0f\u6765\u6307\u5b9a\n\t//sidebar.setObject({aaa: 111, bbb: 'Hello World!'}); // \u76f4\u63a5\u8bbe\u7f6e\u663e\u793a\u67d0\u4e2a\u5bf9\u8c61\n});\n```\n\nsetPage\u65f6\u7684\u6548\u679c\uff1a\n\n![](http://image.liuxianan.com/201706/20170613_194023_184_1728.png)\n\n\u4ee5\u4e0b\u622a\u56fe\u793a\u4f8b\u7684\u4ee3\u7801\uff1a\n\n![](http://image.liuxianan.com/201706/20170613_220345_133_1766.png)\n\n```javascript\n// \u68c0\u6d4bjQuery\ndocument.getElementById('check_jquery').addEventListener('click', function()\n{\n\t// \u8bbf\u95ee\u88ab\u68c0\u67e5\u7684\u9875\u9762DOM\u9700\u8981\u4f7f\u7528inspectedWindow\n\t// \u7b80\u5355\u4f8b\u5b50\uff1a\u68c0\u6d4b\u88ab\u68c0\u67e5\u9875\u9762\u662f\u5426\u4f7f\u7528\u4e86jQuery\n\tchrome.devtools.inspectedWindow.eval(\"jQuery.fn.jquery\", function(result, isException)\n\t{\n\t\tvar html = '';\n\t\tif (isException) html = '\u5f53\u524d\u9875\u9762\u6ca1\u6709\u4f7f\u7528jQuery\u3002';\n\t\telse html = '\u5f53\u524d\u9875\u9762\u4f7f\u7528\u4e86jQuery\uff0c\u7248\u672c\u4e3a\uff1a'+result;\n\t\talert(html);\n\t});\n});\n\n// \u6253\u5f00\u67d0\u4e2a\u8d44\u6e90\ndocument.getElementById('open_resource').addEventListener('click', function()\n{\n\tchrome.devtools.inspectedWindow.eval(\"window.location.href\", function(result, isException)\n\t{\n\t\tchrome.devtools.panels.openResource(result, 20, function()\n\t\t{\n\t\t\tconsole.log('\u8d44\u6e90\u6253\u5f00\u6210\u529f\uff01');\n\t\t});\n\t});\n});\n\n// \u5ba1\u67e5\u5143\u7d20\ndocument.getElementById('test_inspect').addEventListener('click', function()\n{\n\tchrome.devtools.inspectedWindow.eval(\"inspect(document.images[0])\", function(result, isException){});\n});\n\n// \u83b7\u53d6\u6240\u6709\u8d44\u6e90\ndocument.getElementById('get_all_resources').addEventListener('click', function()\n{\n\tchrome.devtools.inspectedWindow.getResources(function(resources)\n\t{\n\t\talert(JSON.stringify(resources));\n\t});\n});\n```\n\n### \u8c03\u8bd5\u6280\u5de7\n\n\u4fee\u6539\u4e86devtools\u9875\u9762\u7684\u4ee3\u7801\u65f6\uff0c\u9700\u8981\u5148\u5728 chrome://extensions \u9875\u9762\u6309\u4e0b`Ctrl+R`\u91cd\u65b0\u52a0\u8f7d\u63d2\u4ef6\uff0c\u7136\u540e\u5173\u95ed\u518d\u6253\u5f00\u5f00\u53d1\u8005\u5de5\u5177\u5373\u53ef\uff0c\u65e0\u9700\u5237\u65b0\u9875\u9762\uff08\u800c\u4e14\u53ea\u5237\u65b0\u9875\u9762\u4e0d\u5237\u65b0\u5f00\u53d1\u8005\u5de5\u5177\u7684\u8bdd\u662f\u4e0d\u4f1a\u751f\u6548\u7684\uff09\u3002\n\n\u7531\u4e8edevtools\u672c\u8eab\u5c31\u662f\u5f00\u53d1\u8005\u5de5\u5177\u9875\u9762\uff0c\u6240\u4ee5\u51e0\u4e4e\u6ca1\u6709\u65b9\u6cd5\u53ef\u4ee5\u76f4\u63a5\u8c03\u8bd5\u5b83\uff0c\u76f4\u63a5\u7528 `chrome-extension://extid/devtools.html\"`\u7684\u65b9\u5f0f\u6253\u5f00\u9875\u9762\u80af\u5b9a\u62a5\u9519\uff0c\u56e0\u4e3a\u4e0d\u652f\u6301\u76f8\u5173\u7279\u6b8aAPI\uff0c\u53ea\u80fd\u5148\u81ea\u5df1\u5199\u4e00\u4e9b\u65b9\u6cd5\u5c4f\u853d\u8fd9\u4e9b\u9519\u8bef\uff0c\u8c03\u8bd5\u901a\u4e86\u518d\u653e\u5f00\u3002\n\n## option(\u9009\u9879\u9875)\n\n\u6240\u8c13`options`\u9875\uff0c\u5c31\u662f\u63d2\u4ef6\u7684\u8bbe\u7f6e\u9875\u9762\uff0c\u67092\u4e2a\u5165\u53e3\uff0c\u4e00\u4e2a\u662f\u53f3\u952e\u56fe\u6807\u6709\u4e00\u4e2a\u201c\u9009\u9879\u201d\u83dc\u5355\uff0c\u8fd8\u6709\u4e00\u4e2a\u5728\u63d2\u4ef6\u7ba1\u7406\u9875\u9762\uff1a\n\n![](http://image.liuxianan.com/201706/20170621_170046_846_5529.png)\n\n![](http://image.liuxianan.com/201706/20170621_115902_196_9130.png)\n\n\u5728Chrome40\u4ee5\u524d\uff0coptions\u9875\u9762\u548c\u5176\u5b83\u666e\u901a\u9875\u9762\u6ca1\u4ec0\u4e48\u533a\u522b\uff0cChrome40\u4ee5\u540e\u5219\u6709\u4e86\u4e00\u4e9b\u53d8\u5316\u3002\n\n\u6211\u4eec\u5148\u770b\u8001\u7248\u7684[options](https://developer.chrome.com/extensions/options)\uff1a\n\n```javascript\n{\n\t// Chrome40\u4ee5\u524d\u7684\u63d2\u4ef6\u914d\u7f6e\u9875\u5199\u6cd5\n\t\"options_page\": \"options.html\",\n}\n```\n\n\u8fd9\u4e2a\u9875\u9762\u91cc\u9762\u7684\u5185\u5bb9\u5c31\u968f\u4f60\u81ea\u5df1\u53d1\u6325\u4e86\uff0c\u914d\u7f6e\u4e4b\u540e\u5728\u63d2\u4ef6\u7ba1\u7406\u9875\u5c31\u4f1a\u770b\u5230\u4e00\u4e2a`\u9009\u9879`\u6309\u94ae\u5165\u53e3\uff0c\u70b9\u8fdb\u53bb\u5c31\u662f\u6253\u5f00\u4e00\u4e2a\u7f51\u9875\uff0c\u6ca1\u5565\u597d\u8bb2\u7684\u3002\n\n\u6548\u679c:\n\n![](http://image.liuxianan.com/201706/20170621_115705_433_5886.png)\n\n\u518d\u6765\u770b\u65b0\u7248\u7684[optionsV2](https://developer.chrome.com/extensions/optionsV2)\uff1a\n\n```javascript\n{\n\t\"options_ui\":\n\t{\n    \t\"page\": \"options.html\",\n\t\t// \u6dfb\u52a0\u4e00\u4e9b\u9ed8\u8ba4\u7684\u6837\u5f0f\uff0c\u63a8\u8350\u4f7f\u7528\n    \t\"chrome_style\": true\n\t},\n}\n```\n\n`options.html`\u7684\u4ee3\u7801\u6211\u4eec\u6ca1\u6709\u4efb\u4f55\u6539\u52a8\uff0c\u53ea\u662f\u914d\u7f6e\u6587\u4ef6\u6539\u4e86\uff0c\u4e4b\u540e\u6548\u679c\u5982\u4e0b\uff1a\n\n![](http://image.liuxianan.com/201706/20170621_115809_750_1163.png)\n\n\u770b\u8d77\u6765\u662f\u4e0d\u662f\u9ad8\u5927\u4e0a\u4e86\uff1f\n\n\u51e0\u70b9\u6ce8\u610f\uff1a\n\n* \u4e3a\u4e86\u517c\u5bb9\uff0c\u5efa\u8bae2\u79cd\u90fd\u5199\uff0c\u5982\u679c\u90fd\u5199\u4e86\uff0cChrome40\u4ee5\u540e\u4f1a\u9ed8\u8ba4\u8bfb\u53d6\u65b0\u7248\u7684\u65b9\u5f0f\uff1b\n* \u65b0\u7248options\u4e2d\u4e0d\u80fd\u4f7f\u7528alert\uff1b\n* \u6570\u636e\u5b58\u50a8\u5efa\u8bae\u7528chrome.storage\uff0c\u56e0\u4e3a\u4f1a\u968f\u7528\u6237\u81ea\u52a8\u540c\u6b65\uff1b\n\n## omnibox\n\n`omnibox`\u662f\u5411\u7528\u6237\u63d0\u4f9b\u641c\u7d22\u5efa\u8bae\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u5148\u6765\u770b\u4e2a`gif`\u56fe\u4ee5\u4fbf\u4e86\u89e3\u4e00\u4e0b\u8fd9\u4e1c\u897f\u5230\u5e95\u662f\u4e2a\u4ec0\u4e48\u9b3c\uff1a\n\n![](http://image.liuxianan.com/201706/20170621_155455_980_5359.gif)\n\n\u6ce8\u518c\u67d0\u4e2a\u5173\u952e\u5b57\u4ee5\u89e6\u53d1\u63d2\u4ef6\u81ea\u5df1\u7684\u641c\u7d22\u5efa\u8bae\u754c\u9762\uff0c\u7136\u540e\u53ef\u4ee5\u4efb\u610f\u53d1\u6325\u4e86\u3002\n\n\u9996\u5148\uff0c\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\uff1a\n\n```javascript\n{\n\t// \u5411\u5730\u5740\u680f\u6ce8\u518c\u4e00\u4e2a\u5173\u952e\u5b57\u4ee5\u63d0\u4f9b\u641c\u7d22\u5efa\u8bae\uff0c\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u5173\u952e\u5b57\n\t\"omnibox\": { \"keyword\" : \"go\" },\n}\n```\n\n\u7136\u540e`background.js`\u4e2d\u6ce8\u518c\u76d1\u542c\u4e8b\u4ef6\uff1a\n\n```javascript\n// omnibox \u6f14\u793a\nchrome.omnibox.onInputChanged.addListener((text, suggest) => {\n\tconsole.log('inputChanged: ' + text);\n\tif(!text) return;\n\tif(text == '\u7f8e\u5973') {\n\t\tsuggest([\n\t\t\t{content: '\u4e2d\u56fd' + text, description: '\u4f60\u8981\u627e\u201c\u4e2d\u56fd\u7f8e\u5973\u201d\u5417\uff1f'},\n\t\t\t{content: '\u65e5\u672c' + text, description: '\u4f60\u8981\u627e\u201c\u65e5\u672c\u7f8e\u5973\u201d\u5417\uff1f'},\n\t\t\t{content: '\u6cf0\u56fd' + text, description: '\u4f60\u8981\u627e\u201c\u6cf0\u56fd\u7f8e\u5973\u6216\u4eba\u5996\u201d\u5417\uff1f'},\n\t\t\t{content: '\u97e9\u56fd' + text, description: '\u4f60\u8981\u627e\u201c\u97e9\u56fd\u7f8e\u5973\u201d\u5417\uff1f'}\n\t\t]);\n\t}\n\telse if(text == '\u5fae\u535a') {\n\t\tsuggest([\n\t\t\t{content: '\u65b0\u6d6a' + text, description: '\u65b0\u6d6a' + text},\n\t\t\t{content: '\u817e\u8baf' + text, description: '\u817e\u8baf' + text},\n\t\t\t{content: '\u641c\u72d0' + text, description: '\u641c\u7d22' + text},\n\t\t]);\n\t}\n\telse {\n\t\tsuggest([\n\t\t\t{content: '\u767e\u5ea6\u641c\u7d22 ' + text, description: '\u767e\u5ea6\u641c\u7d22 ' + text},\n\t\t\t{content: '\u8c37\u6b4c\u641c\u7d22 ' + text, description: '\u8c37\u6b4c\u641c\u7d22 ' + text},\n\t\t]);\n\t}\n});\n\n// \u5f53\u7528\u6237\u63a5\u6536\u5173\u952e\u5b57\u5efa\u8bae\u65f6\u89e6\u53d1\nchrome.omnibox.onInputEntered.addListener((text) => {\n    console.log('inputEntered: ' + text);\n\tif(!text) return;\n\tvar href = '';\n    if(text.endsWith('\u7f8e\u5973')) href = 'http://image.baidu.com/search/index?tn=baiduimage&ie=utf-8&word=' + text;\n\telse if(text.startsWith('\u767e\u5ea6\u641c\u7d22')) href = 'https://www.baidu.com/s?ie=UTF-8&wd=' + text.replace('\u767e\u5ea6\u641c\u7d22 ', '');\n\telse if(text.startsWith('\u8c37\u6b4c\u641c\u7d22')) href = 'https://www.google.com.tw/search?q=' + text.replace('\u8c37\u6b4c\u641c\u7d22 ', '');\n\telse href = 'https://www.baidu.com/s?ie=UTF-8&wd=' + text;\n\topenUrlCurrentTab(href);\n});\n// \u83b7\u53d6\u5f53\u524d\u9009\u9879\u5361ID\nfunction getCurrentTabId(callback)\n{\n\tchrome.tabs.query({active: true, currentWindow: true}, function(tabs)\n\t{\n\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\n\t});\n}\n\n// \u5f53\u524d\u6807\u7b7e\u6253\u5f00\u67d0\u4e2a\u94fe\u63a5\nfunction openUrlCurrentTab(url)\n{\n\tgetCurrentTabId(tabId => {\n\t\tchrome.tabs.update(tabId, {url: url});\n\t})\n}\n```\n\n\n## \u684c\u9762\u901a\u77e5\n\nChrome\u63d0\u4f9b\u4e86\u4e00\u4e2a`chrome.notifications`API\u4ee5\u4fbf\u63d2\u4ef6\u63a8\u9001\u684c\u9762\u901a\u77e5\uff0c\u6682\u672a\u627e\u5230`chrome.notifications`\u548cHTML5\u81ea\u5e26\u7684`Notification`\u7684\u663e\u8457\u533a\u522b\u53ca\u4f18\u52bf\u3002\n\n\u5728\u540e\u53f0JS\u4e2d\uff0c\u65e0\u8bba\u662f\u4f7f\u7528`chrome.notifications`\u8fd8\u662f`Notification`\u90fd\u4e0d\u9700\u8981\u7533\u8bf7\u6743\u9650\uff08HTML5\u65b9\u5f0f\u9700\u8981\u7533\u8bf7\u6743\u9650\uff09\uff0c\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\u3002\n\n\u6700\u7b80\u5355\u7684\u901a\u77e5\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_193633_369_0274.png)\n\n\u4ee3\u7801\uff1a\n\n```javascript\nchrome.notifications.create(null, {\n\ttype: 'basic',\n\ticonUrl: 'img/icon.png',\n\ttitle: '\u8fd9\u662f\u6807\u9898',\n\tmessage: '\u60a8\u521a\u624d\u70b9\u51fb\u4e86\u81ea\u5b9a\u4e49\u53f3\u952e\u83dc\u5355\uff01'\n});\n```\n\n\u901a\u77e5\u7684\u6837\u5f0f\u53ef\u4ee5\u5f88\u4e30\u5bcc\uff1a\n\n![](http://image.liuxianan.com/201705/20170531_193836_583_4450.png)\n\n\u8fd9\u4e2a\u6ca1\u6709\u6df1\u5165\u7814\u7a76\uff0c\u6709\u9700\u8981\u7684\u53ef\u4ee5\u53bb\u770b\u5b98\u65b9\u6587\u6863\u3002\n\n# 5\u79cd\u7c7b\u578b\u7684JS\u5bf9\u6bd4\n\nChrome\u63d2\u4ef6\u7684JS\u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a\u8fd95\u7c7b\uff1a`injected script`\u3001`content-script`\u3001`popup js`\u3001`background js`\u548c`devtools js`\uff0c\n\n## \u6743\u9650\u5bf9\u6bd4\n\n| JS\u79cd\u7c7b  | \u53ef\u8bbf\u95ee\u7684API  | DOM\u8bbf\u95ee\u60c5\u51b5 | JS\u8bbf\u95ee\u60c5\u51b5 | \u76f4\u63a5\u8de8\u57df |\n| ------------ | ------------ | -------- | --------- | -------- |\n| injected script  | \u548c\u666e\u901aJS\u65e0\u4efb\u4f55\u5dee\u522b\uff0c\u4e0d\u80fd\u8bbf\u95ee\u4efb\u4f55\u6269\u5c55API  | \u53ef\u4ee5\u8bbf\u95ee | \u53ef\u4ee5\u8bbf\u95ee | \u4e0d\u53ef\u4ee5 |\n| content script  | \u53ea\u80fd\u8bbf\u95ee extension\u3001runtime\u7b49\u90e8\u5206API  | \u53ef\u4ee5\u8bbf\u95ee | \u4e0d\u53ef\u4ee5 | \u4e0d\u53ef\u4ee5 |\n| popup js | \u53ef\u8bbf\u95ee\u7edd\u5927\u90e8\u5206API\uff0c\u9664\u4e86devtools\u7cfb\u5217  | \u4e0d\u53ef\u76f4\u63a5\u8bbf\u95ee | \u4e0d\u53ef\u4ee5 | \u53ef\u4ee5 |\n| background js | \u53ef\u8bbf\u95ee\u7edd\u5927\u90e8\u5206API\uff0c\u9664\u4e86devtools\u7cfb\u5217  | \u4e0d\u53ef\u76f4\u63a5\u8bbf\u95ee | \u4e0d\u53ef\u4ee5 | \u53ef\u4ee5 |\n| devtools js | \u53ea\u80fd\u8bbf\u95ee devtools\u3001extension\u3001runtime\u7b49\u90e8\u5206API  | \u53ef\u4ee5 | \u53ef\u4ee5 | \u4e0d\u53ef\u4ee5 |\n\n## \u8c03\u8bd5\u65b9\u5f0f\u5bf9\u6bd4\n\n| JS\u7c7b\u578b | \u8c03\u8bd5\u65b9\u5f0f | \u56fe\u7247\u8bf4\u660e |\n| ------------ | ------------ | ------ |\n| injected script | \u76f4\u63a5\u666e\u901a\u7684F12\u5373\u53ef  | \u61d2\u5f97\u622a\u56fe |\n| content-script | \u6253\u5f00Console,\u5982\u56fe\u5207\u6362 | ![](http://image.liuxianan.com/201612/20161220_105526_629_8533.png) |\n| popup-js | popup\u9875\u9762\u53f3\u952e\u5ba1\u67e5\u5143\u7d20 | ![](http://image.liuxianan.com/201612/20161220_105716_178_6900.png) |\n| background |  \u63d2\u4ef6\u7ba1\u7406\u9875\u70b9\u51fb\u80cc\u666f\u9875\u5373\u53ef | ![](http://image.liuxianan.com/201612/20161220_105811_922_5621.png) |\n| devtools-js | \u6682\u672a\u627e\u5230\u6709\u6548\u65b9\u6cd5 | - |\n\n\n# \u6d88\u606f\u901a\u4fe1\n\n\u901a\u4fe1\u4e3b\u9875\uff1ahttps://developer.chrome.com/extensions/messaging\n\n\u524d\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86Chrome\u63d2\u4ef6\u4e2d\u5b58\u5728\u76845\u79cdJS\uff0c\u90a3\u4e48\u5b83\u4eec\u4e4b\u95f4\u5982\u4f55\u4e92\u76f8\u901a\u4fe1\u5462\uff1f\u4e0b\u9762\u5148\u6765\u7cfb\u7edf\u6982\u51b5\u4e00\u4e0b\uff0c\u7136\u540e\u518d\u5206\u7c7b\u7ec6\u8bf4\u3002\u9700\u8981\u77e5\u9053\u7684\u662f\uff0cpopup\u548cbackground\u5176\u5b9e\u51e0\u4e4e\u53ef\u4ee5\u89c6\u4e3a\u4e00\u79cd\u4e1c\u897f\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u8bbf\u95ee\u7684API\u90fd\u4e00\u6837\u3001\u901a\u4fe1\u673a\u5236\u4e00\u6837\u3001\u90fd\u53ef\u4ee5\u8de8\u57df\u3002\n\n## \u4e92\u76f8\u901a\u4fe1\u6982\u89c8\n\n\u6ce8\uff1a`-`\u8868\u793a\u4e0d\u5b58\u5728\u6216\u8005\u65e0\u610f\u4e49\uff0c\u6216\u8005\u5f85\u9a8c\u8bc1\u3002\n\n|   | injected-script | content-script  | popup-js  | background-js  |\n| ------------ | ------------ | ------------ | ------------ | ------------ |\n| injected-script | - | window.postMessage | - | - |\n| content-script  | window.postMessage | -  | chrome.runtime.sendMessage chrome.runtime.connect  | chrome.runtime.sendMessage chrome.runtime.connect  |\n| popup-js  | - | chrome.tabs.sendMessage chrome.tabs.connect | - | chrome.extension. getBackgroundPage()  |\n| background-js  | - | chrome.tabs.sendMessage chrome.tabs.connect | chrome.extension.getViews | - |\n| devtools-js  | chrome.devtools. inspectedWindow.eval | - | chrome.runtime.sendMessage  | chrome.runtime.sendMessage  |\n\n## \u901a\u4fe1\u8be6\u7ec6\u4ecb\u7ecd\n\n### popup\u548cbackground\n\npopup\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528background\u4e2d\u7684JS\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95eebackground\u7684DOM\uff1a\n\n```javascript\n// background.js\nfunction test()\n{\n\talert('\u6211\u662fbackground\uff01');\n}\n\n// popup.js\nvar bg = chrome.extension.getBackgroundPage();\nbg.test(); // \u8bbf\u95eebg\u7684\u51fd\u6570\nalert(bg.document.body.innerHTML); // \u8bbf\u95eebg\u7684DOM\n```\n\n> \u5c0f\u63d2\u66f2\uff0c\u4eca\u5929\u78b0\u5230\u4e00\u4e2a\u60c5\u51b5\uff0c\u53d1\u73b0popup\u65e0\u6cd5\u83b7\u53d6background\u7684\u4efb\u4f55\u65b9\u6cd5\uff0c\u627e\u4e86\u534a\u5929\u624d\u53d1\u73b0\u662f\u56e0\u4e3abackground\u7684js\u62a5\u9519\u4e86\uff0c\u800c\u4f60\u5982\u679c\u4e0d\u4e3b\u52a8\u67e5\u770bbackground\u7684js\u7684\u8bdd\uff0c\u662f\u770b\u4e0d\u5230\u9519\u8bef\u4fe1\u606f\u7684\uff0c\u7279\u6b64\u63d0\u9192\u3002\n\n\u81f3\u4e8e`background`\u8bbf\u95ee`popup`\u5982\u4e0b\uff08\u524d\u63d0\u662f`popup`\u5df2\u7ecf\u6253\u5f00\uff09\uff1a\n\n```javascript\nvar views = chrome.extension.getViews({type:'popup'});\nif(views.length > 0) {\n\tconsole.log(views[0].location.href);\n}\n```\n\n### popup\u6216\u8005bg\u5411content\u4e3b\u52a8\u53d1\u9001\u6d88\u606f\n\nbackground.js\u6216\u8005popup.js\uff1a\n\n```javascript\nfunction sendMessageToContentScript(message, callback)\n{\n\tchrome.tabs.query({active: true, currentWindow: true}, function(tabs)\n\t{\n\t\tchrome.tabs.sendMessage(tabs[0].id, message, function(response)\n\t\t{\n\t\t\tif(callback) callback(response);\n\t\t});\n\t});\n}\nsendMessageToContentScript({cmd:'test', value:'\u4f60\u597d\uff0c\u6211\u662fpopup\uff01'}, function(response)\n{\n\tconsole.log('\u6765\u81eacontent\u7684\u56de\u590d\uff1a'+response);\n});\n```\n\n`content-script.js`\u63a5\u6536\uff1a\n\n```javascript\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse)\n{\n\t// console.log(sender.tab ?\"from a content script:\" + sender.tab.url :\"from the extension\");\n\tif(request.cmd == 'test') alert(request.value);\n\tsendResponse('\u6211\u6536\u5230\u4e86\u4f60\u7684\u6d88\u606f\uff01');\n});\n```\n\n\u53cc\u65b9\u901a\u4fe1\u76f4\u63a5\u53d1\u9001\u7684\u90fd\u662fJSON\u5bf9\u8c61\uff0c\u4e0d\u662fJSON\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u65e0\u9700\u89e3\u6790\uff0c\u5f88\u65b9\u4fbf\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u53d1\u9001\u5b57\u7b26\u4e32\uff09\u3002\n\n> \u7f51\u4e0a\u6709\u4e9b\u8001\u4ee3\u7801\u4e2d\u7528\u7684\u662f`chrome.extension.onMessage`\uff0c\u6ca1\u6709\u5b8c\u5168\u67e5\u6e05\u4e8c\u8005\u7684\u533a\u522b(\u8c8c\u4f3c\u662f\u522b\u540d)\uff0c\u4f46\u662f\u5efa\u8bae\u7edf\u4e00\u4f7f\u7528`chrome.runtime.onMessage`\u3002\n\n### content-script\u4e3b\u52a8\u53d1\u6d88\u606f\u7ed9\u540e\u53f0\n\ncontent-script.js\uff1a\n\n```javascript\nchrome.runtime.sendMessage({greeting: '\u4f60\u597d\uff0c\u6211\u662fcontent-script\u5440\uff0c\u6211\u4e3b\u52a8\u53d1\u6d88\u606f\u7ed9\u540e\u53f0\uff01'}, function(response) {\n\tconsole.log('\u6536\u5230\u6765\u81ea\u540e\u53f0\u7684\u56de\u590d\uff1a' + response);\n});\n```\n\nbackground.js \u6216\u8005 popup.js\uff1a\n\n```javascript\n// \u76d1\u542c\u6765\u81eacontent-script\u7684\u6d88\u606f\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse)\n{\n\tconsole.log('\u6536\u5230\u6765\u81eacontent-script\u7684\u6d88\u606f\uff1a');\n\tconsole.log(request, sender, sendResponse);\n\tsendResponse('\u6211\u662f\u540e\u53f0\uff0c\u6211\u5df2\u6536\u5230\u4f60\u7684\u6d88\u606f\uff1a' + JSON.stringify(request));\n});\n```\n\n\u6ce8\u610f\u4e8b\u9879\uff1a\n\n* content_scripts\u5411`popup`\u4e3b\u52a8\u53d1\u6d88\u606f\u7684\u524d\u63d0\u662fpopup\u5fc5\u987b\u6253\u5f00\uff01\u5426\u5219\u9700\u8981\u5229\u7528background\u4f5c\u4e2d\u8f6c\uff1b\n* \u5982\u679cbackground\u548cpopup\u540c\u65f6\u76d1\u542c\uff0c\u90a3\u4e48\u5b83\u4eec\u90fd\u53ef\u4ee5\u540c\u65f6\u6536\u5230\u6d88\u606f\uff0c\u4f46\u662f\u53ea\u6709\u4e00\u4e2a\u53ef\u4ee5sendResponse\uff0c\u4e00\u4e2a\u5148\u53d1\u9001\u4e86\uff0c\u90a3\u4e48\u53e6\u5916\u4e00\u4e2a\u518d\u53d1\u9001\u5c31\u65e0\u6548\uff1b\n\n### injected script\u548ccontent-script\n\n`content-script`\u548c\u9875\u9762\u5185\u7684\u811a\u672c\uff08`injected-script`\u81ea\u7136\u4e5f\u5c5e\u4e8e\u9875\u9762\u5185\u7684\u811a\u672c\uff09\u4e4b\u95f4\u552f\u4e00\u5171\u4eab\u7684\u4e1c\u897f\u5c31\u662f\u9875\u9762\u7684DOM\u5143\u7d20\uff0c\u67092\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u4e8c\u8005\u901a\u8baf\uff1a\n\n1. \u53ef\u4ee5\u901a\u8fc7`window.postMessage`\u548c`window.addEventListener`\u6765\u5b9e\u73b0\u4e8c\u8005\u6d88\u606f\u901a\u8baf\uff1b\n2. \u901a\u8fc7\u81ea\u5b9a\u4e49DOM\u4e8b\u4ef6\u6765\u5b9e\u73b0\uff1b\n\n\u7b2c\u4e00\u79cd\u65b9\u6cd5\uff08\u63a8\u8350\uff09\uff1a\n\n`injected-script`\u4e2d\uff1a\n\n```javascript\nwindow.postMessage({\"test\": '\u4f60\u597d\uff01'}, '*');\n```\n\ncontent script\u4e2d\uff1a\n\n```javascript\nwindow.addEventListener(\"message\", function(e)\n{\n\tconsole.log(e.data);\n}, false);\n```\n\n\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff1a\n\n`injected-script`\u4e2d\uff1a\n\n```javascript\nvar customEvent = document.createEvent('Event');\ncustomEvent.initEvent('myCustomEvent', true, true);\nfunction fireCustomEvent(data) {\n\thiddenDiv = document.getElementById('myCustomEventDiv');\n\thiddenDiv.innerText = data\n\thiddenDiv.dispatchEvent(customEvent);\n}\nfireCustomEvent('\u4f60\u597d\uff0c\u6211\u662f\u666e\u901aJS\uff01');\n```\n\n`content-script.js`\u4e2d\uff1a\n\n```javascript\nvar hiddenDiv = document.getElementById('myCustomEventDiv');\nif(!hiddenDiv) {\n\thiddenDiv = document.createElement('div');\n\thiddenDiv.style.display = 'none';\n\tdocument.body.appendChild(hiddenDiv);\n}\nhiddenDiv.addEventListener('myCustomEvent', function() {\n\tvar eventData = document.getElementById('myCustomEventDiv').innerText;\n\tconsole.log('\u6536\u5230\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u6d88\u606f\uff1a' + eventData);\n});\n```\n\n## \u957f\u8fde\u63a5\u548c\u77ed\u8fde\u63a5\n\n\u5176\u5b9e\u4e0a\u9762\u5df2\u7ecf\u6d89\u53ca\u5230\u4e86\uff0c\u8fd9\u91cc\u518d\u5355\u72ec\u8bf4\u660e\u4e00\u4e0b\u3002Chrome\u63d2\u4ef6\u4e2d\u67092\u79cd\u901a\u4fe1\u65b9\u5f0f\uff0c\u4e00\u4e2a\u662f\u77ed\u8fde\u63a5\uff08`chrome.tabs.sendMessage`\u548c`chrome.runtime.sendMessage`\uff09\uff0c\u4e00\u4e2a\u662f\u957f\u8fde\u63a5\uff08`chrome.tabs.connect`\u548c`chrome.runtime.connect`\uff09\u3002\n\n\u77ed\u8fde\u63a5\u7684\u8bdd\u5c31\u662f\u6324\u7259\u818f\u4e00\u6837\uff0c\u6211\u53d1\u9001\u4e00\u4e0b\uff0c\u4f60\u6536\u5230\u4e86\u518d\u56de\u590d\u4e00\u4e0b\uff0c\u5982\u679c\u5bf9\u65b9\u4e0d\u56de\u590d\uff0c\u4f60\u53ea\u80fd\u91cd\u65b0\u53d1\uff0c\u800c\u957f\u8fde\u63a5\u7c7b\u4f3c`WebSocket`\u4f1a\u4e00\u76f4\u5efa\u7acb\u8fde\u63a5\uff0c\u53cc\u65b9\u53ef\u4ee5\u968f\u65f6\u4e92\u53d1\u6d88\u606f\u3002\n\n\u77ed\u8fde\u63a5\u4e0a\u9762\u5df2\u7ecf\u6709\u4ee3\u7801\u793a\u4f8b\u4e86\uff0c\u8fd9\u91cc\u53ea\u8bb2\u4e00\u4e0b\u957f\u8fde\u63a5\u3002\n\npopup.js\uff1a\n\n```javascript\ngetCurrentTabId((tabId) => {\n\tvar port = chrome.tabs.connect(tabId, {name: 'test-connect'});\n\tport.postMessage({question: '\u4f60\u662f\u8c01\u554a\uff1f'});\n\tport.onMessage.addListener(function(msg) {\n\t\talert('\u6536\u5230\u6d88\u606f\uff1a'+msg.answer);\n\t\tif(msg.answer && msg.answer.startsWith('\u6211\u662f'))\n\t\t{\n\t\t\tport.postMessage({question: '\u54e6\uff0c\u539f\u6765\u662f\u4f60\u554a\uff01'});\n\t\t}\n\t});\n});\n```\n\ncontent-script.js\uff1a\n\n```javascript\n// \u76d1\u542c\u957f\u8fde\u63a5\nchrome.runtime.onConnect.addListener(function(port) {\n\tconsole.log(port);\n\tif(port.name == 'test-connect') {\n\t\tport.onMessage.addListener(function(msg) {\n\t\t\tconsole.log('\u6536\u5230\u957f\u8fde\u63a5\u6d88\u606f\uff1a', msg);\n\t\t\tif(msg.question == '\u4f60\u662f\u8c01\u554a\uff1f') port.postMessage({answer: '\u6211\u662f\u4f60\u7238\uff01'});\n\t\t});\n\t}\n});\n```\n\n# \u5176\u5b83\u8865\u5145\n\n## \u52a8\u6001\u6ce8\u5165\u6216\u6267\u884cJS\n\n\u867d\u7136\u5728`background`\u548c`popup`\u4e2d\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u9875\u9762DOM\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7`chrome.tabs.executeScript`\u6765\u6267\u884c\u811a\u672c\uff0c\u4ece\u800c\u5b9e\u73b0\u8bbf\u95eeweb\u9875\u9762\u7684DOM\uff08\u6ce8\u610f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u9875\u9762JS\uff09\u3002\n\n\u793a\u4f8b`manifest.json`\u914d\u7f6e\uff1a\n\n```javascript\n{\n\t\"name\": \"\u52a8\u6001JS\u6ce8\u5165\u6f14\u793a\",\n\t...\n\t\"permissions\": [\n\t\t\"tabs\", \"http://*/*\", \"https://*/*\"\n\t],\n\t...\n}\n```\n\nJS\uff1a\n\n```javascript\n// \u52a8\u6001\u6267\u884cJS\u4ee3\u7801\nchrome.tabs.executeScript(tabId, {code: 'document.body.style.backgroundColor=\"red\"'});\n// \u52a8\u6001\u6267\u884cJS\u6587\u4ef6\nchrome.tabs.executeScript(tabId, {file: 'some-script.js'});\n```\n\n## \u52a8\u6001\u6ce8\u5165CSS\n\n\u793a\u4f8b`manifest.json`\u914d\u7f6e\uff1a\n\n```javascript\n{\n\t\"name\": \"\u52a8\u6001CSS\u6ce8\u5165\u6f14\u793a\",\n\t...\n\t\"permissions\": [\n\t\t\"tabs\", \"http://*/*\", \"https://*/*\"\n\t],\n\t...\n}\n```\n\nJS\u4ee3\u7801\uff1a\n\n```javascript\n// \u52a8\u6001\u6267\u884cCSS\u4ee3\u7801\uff0cTODO\uff0c\u8fd9\u91cc\u6709\u5f85\u9a8c\u8bc1\nchrome.tabs.insertCSS(tabId, {code: 'xxx'});\n// \u52a8\u6001\u6267\u884cCSS\u6587\u4ef6\nchrome.tabs.insertCSS(tabId, {file: 'some-style.css'});\n```\n\n\n## \u83b7\u53d6\u5f53\u524d\u7a97\u53e3ID\n\n```javascript\nchrome.windows.getCurrent(function(currentWindow)\n{\n\tconsole.log('\u5f53\u524d\u7a97\u53e3ID\uff1a' + currentWindow.id);\n});\n```\n\n## \u83b7\u53d6\u5f53\u524d\u6807\u7b7e\u9875ID\n\n\u4e00\u822c\u67092\u79cd\u65b9\u6cd5\uff1a\n\n```javascript\n// \u83b7\u53d6\u5f53\u524d\u9009\u9879\u5361ID\nfunction getCurrentTabId(callback)\n{\n\tchrome.tabs.query({active: true, currentWindow: true}, function(tabs)\n\t{\n\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\n\t});\n}\n```\n\n\u83b7\u53d6\u5f53\u524d\u9009\u9879\u5361id\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\uff0c\u5927\u90e8\u5206\u65f6\u5019\u90fd\u7c7b\u4f3c\uff0c\u53ea\u6709\u5c11\u90e8\u5206\u65f6\u5019\u4f1a\u4e0d\u4e00\u6837\uff08\u4f8b\u5982\u5f53\u7a97\u53e3\u6700\u5c0f\u5316\u65f6\uff09\n```javascript\n// \u83b7\u53d6\u5f53\u524d\u9009\u9879\u5361ID\nfunction getCurrentTabId2()\n{\n\tchrome.windows.getCurrent(function(currentWindow)\n\t{\n\t\tchrome.tabs.query({active: true, windowId: currentWindow.id}, function(tabs)\n\t\t{\n\t\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\n\t\t});\n\t});\n}\n```\n\n## \u672c\u5730\u5b58\u50a8\n\n\u672c\u5730\u5b58\u50a8\u5efa\u8bae\u7528`chrome.storage`\u800c\u4e0d\u662f\u666e\u901a\u7684`localStorage`\uff0c\u533a\u522b\u6709\u597d\u51e0\u70b9\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u6700\u91cd\u8981\u76842\u70b9\u533a\u522b\u662f\uff1a\n\n* `chrome.storage`\u662f\u9488\u5bf9\u63d2\u4ef6\u5168\u5c40\u7684\uff0c\u5373\u4f7f\u4f60\u5728`background`\u4e2d\u4fdd\u5b58\u7684\u6570\u636e\uff0c\u5728`content-script`\u4e5f\u80fd\u83b7\u53d6\u5230\uff1b\n* `chrome.storage.sync`\u53ef\u4ee5\u8ddf\u968f\u5f53\u524d\u767b\u5f55\u7528\u6237\u81ea\u52a8\u540c\u6b65\uff0c\u8fd9\u53f0\u7535\u8111\u4fee\u6539\u7684\u8bbe\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5176\u5b83\u7535\u8111\uff0c\u5f88\u65b9\u4fbf\uff0c\u5982\u679c\u6ca1\u6709\u767b\u5f55\u6216\u8005\u672a\u8054\u7f51\u5219\u5148\u4fdd\u5b58\u5230\u672c\u5730\uff0c\u7b49\u767b\u5f55\u4e86\u518d\u540c\u6b65\u81f3\u7f51\u7edc\uff1b\n\n\u9700\u8981\u58f0\u660e`storage`\u6743\u9650\uff0c\u6709`chrome.storage.sync`\u548c`chrome.storage.local`2\u79cd\u65b9\u5f0f\u53ef\u4f9b\u9009\u62e9\uff0c\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a\n\n```javascript\n// \u8bfb\u53d6\u6570\u636e\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6307\u5b9a\u8981\u8bfb\u53d6\u7684key\u4ee5\u53ca\u8bbe\u7f6e\u9ed8\u8ba4\u503c\nchrome.storage.sync.get({color: 'red', age: 18}, function(items) {\n\tconsole.log(items.color, items.age);\n});\n// \u4fdd\u5b58\u6570\u636e\nchrome.storage.sync.set({color: 'blue'}, function() {\n\tconsole.log('\u4fdd\u5b58\u6210\u529f\uff01');\n});\n```\n\n## webRequest\n\n\u901a\u8fc7webRequest\u7cfb\u5217API\u53ef\u4ee5\u5bf9HTTP\u8bf7\u6c42\u8fdb\u884c\u4efb\u6027\u5730\u4fee\u6539\u3001\u5b9a\u5236\uff0c\u8fd9\u91cc\u901a\u8fc7`beforeRequest`\u6765\u7b80\u5355\u6f14\u793a\u4e00\u4e0b\u5b83\u7684\u51b0\u5c71\u4e00\u89d2\uff1a\n\n```javascript\n//manifest.json\n{\n\t// \u6743\u9650\u7533\u8bf7\n\t\"permissions\":\n\t[\n\t\t\"webRequest\", // web\u8bf7\u6c42\n\t\t\"webRequestBlocking\", // \u963b\u585e\u5f0fweb\u8bf7\u6c42\n\t\t\"storage\", // \u63d2\u4ef6\u672c\u5730\u5b58\u50a8\n\t\t\"http://*/*\", // \u53ef\u4ee5\u901a\u8fc7executeScript\u6216\u8005insertCSS\u8bbf\u95ee\u7684\u7f51\u7ad9\n\t\t\"https://*/*\" // \u53ef\u4ee5\u901a\u8fc7executeScript\u6216\u8005insertCSS\u8bbf\u95ee\u7684\u7f51\u7ad9\n\t],\n}\n\n\n// background.js\n// \u662f\u5426\u663e\u793a\u56fe\u7247\nvar showImage;\nchrome.storage.sync.get({showImage: true}, function(items) {\n\tshowImage = items.showImage;\n});\n// web\u8bf7\u6c42\u76d1\u542c\uff0c\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u963b\u585e\u5f0f\uff0c\u9700\u5355\u72ec\u58f0\u660e\u6743\u9650\uff1awebRequestBlocking\nchrome.webRequest.onBeforeRequest.addListener(details => {\n\t// cancel \u8868\u793a\u53d6\u6d88\u672c\u6b21\u8bf7\u6c42\n\tif(!showImage && details.type == 'image') return {cancel: true};\n\t// \u7b80\u5355\u7684\u97f3\u89c6\u9891\u68c0\u6d4b\n\t// \u5927\u90e8\u5206\u7f51\u7ad9\u89c6\u9891\u7684type\u5e76\u4e0d\u662fmedia\uff0c\u4e14\u89c6\u9891\u505a\u4e86\u9632\u4e0b\u8f7d\u5904\u7406\uff0c\u6240\u4ee5\u8fd9\u91cc\u4ec5\u4ec5\u662f\u4e3a\u4e86\u6f14\u793a\u6548\u679c\uff0c\u65e0\u5b9e\u9645\u610f\u4e49\n\tif(details.type == 'media') {\n\t\tchrome.notifications.create(null, {\n\t\t\ttype: 'basic',\n\t\t\ticonUrl: 'img/icon.png',\n\t\t\ttitle: '\u68c0\u6d4b\u5230\u97f3\u89c6\u9891',\n\t\t\tmessage: '\u97f3\u89c6\u9891\u5730\u5740\uff1a' + details.url,\n\t\t});\n\t}\n}, {urls: [\"<all_urls>\"]}, [\"blocking\"]);\n```\n\n## \u56fd\u9645\u5316\n\n\u63d2\u4ef6\u6839\u76ee\u5f55\u65b0\u5efa\u4e00\u4e2a\u540d\u4e3a`_locales`\u7684\u6587\u4ef6\u5939\uff0c\u518d\u5728\u4e0b\u9762\u65b0\u5efa\u4e00\u4e9b\u8bed\u8a00\u7684\u6587\u4ef6\u5939\uff0c\u5982`en`\u3001`zh_CN`\u3001`zh_TW`\uff0c\u7136\u540e\u518d\u5728\u6bcf\u4e2a\u6587\u4ef6\u5939\u653e\u5165\u4e00\u4e2a`messages.json`\uff0c\u540c\u65f6\u5fc5\u987b\u5728\u6e05\u5355\u6587\u4ef6\u4e2d\u8bbe\u7f6e`default_locale`\u3002\n\n`_locales\\en\\messages.json`\u5185\u5bb9\uff1a\n\n```javascript\n{\n\t\"pluginDesc\": {\"message\": \"A simple chrome extension demo\"},\n\t\"helloWorld\": {\"message\": \"Hello World!\"}\n}\n```\n\n`_locales\\zh_CN\\messages.json`\u5185\u5bb9\uff1a\n\n```javascript\n{\n\t\"pluginDesc\": {\"message\": \"\u4e00\u4e2a\u7b80\u5355\u7684Chrome\u63d2\u4ef6demo\"},\n\t\"helloWorld\": {\"message\": \"\u4f60\u597d\u554a\uff0c\u4e16\u754c\uff01\"}\n}\n```\n\n\u5728`manifest.json`\u548c`CSS`\u6587\u4ef6\u4e2d\u901a\u8fc7`__MSG_messagename__`\u5f15\u5165\uff0c\u5982\uff1a\n\n```javascript\n{\n\t\"description\": \"__MSG_pluginDesc__\",\n\t// \u9ed8\u8ba4\u8bed\u8a00\n\t\"default_locale\": \"zh_CN\",\n}\n```\n\nJS\u4e2d\u5219\u76f4\u63a5`chrome.i18n.getMessage(\"helloWorld\")`\u3002\n\n\u6d4b\u8bd5\u65f6\uff0c\u901a\u8fc7\u7ed9chrome\u5efa\u7acb\u4e00\u4e2a\u4e0d\u540c\u7684\u5feb\u6377\u65b9\u5f0f`chrome.exe --lang=en`\u6765\u5207\u6362\u8bed\u8a00\uff0c\u5982\uff1a\n\n![](http://image.liuxianan.com/201706/20170621_180606_759_2394.png)\n\n\u82f1\u6587\u6548\u679c\uff1a\n\n![](http://image.liuxianan.com/201706/20170621_175733_172_5903.png)\n\n\u4e2d\u6587\u6548\u679c\uff1a\n\n![](http://image.liuxianan.com/201706/20170621_175621_269_0466.png)\n\n## API\u603b\u7ed3\n\n\u6bd4\u8f83\u5e38\u7528\u7528\u7684\u4e00\u4e9bAPI\u7cfb\u5217\uff1a\n\n* chrome.tabs\n* chrome.runtime\n* chrome.webRequest\n* chrome.window\n* chrome.storage\n* chrome.contextMenus\n* chrome.devtools\n* chrome.extension\n\n# \u7ecf\u9a8c\u603b\u7ed3\n\n## \u67e5\u770b\u5df2\u5b89\u88c5\u63d2\u4ef6\u8def\u5f84\n\n\u5df2\u5b89\u88c5\u7684\u63d2\u4ef6\u6e90\u7801\u8def\u5f84\uff1a`C:\\Users\\\u7528\u6237\u540d\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Extensions`\uff0c\u6bcf\u4e00\u4e2a\u63d2\u4ef6\u88ab\u653e\u5728\u4ee5\u63d2\u4ef6ID\u4e3a\u540d\u7684\u6587\u4ef6\u5939\u91cc\u9762\uff0c\u60f3\u8981\u5b66\u4e60\u67d0\u4e2a\u63d2\u4ef6\u7684\u67d0\u4e2a\u529f\u80fd\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff0c\u770b\u4eba\u5bb6\u7684\u6e90\u7801\u662f\u6700\u597d\u7684\u65b9\u6cd5\u4e86\uff1a\n\n![](http://image.liuxianan.com/201706/20170601_100200_647_6507.png)\n\n\u5982\u4f55\u67e5\u770b\u67d0\u4e2a\u63d2\u4ef6\u7684ID\uff1f\u8fdb\u5165 chrome://extensions \uff0c\u7136\u540e\u52fe\u7ebf\u5f00\u53d1\u8005\u6a21\u5f0f\u5373\u53ef\u770b\u5230\u4e86\u3002\n\n![](http://image.liuxianan.com/201706/20170601_100408_338_3095.png)\n\n## \u7279\u522b\u6ce8\u610fbackground\u7684\u62a5\u9519\n\n\u5f88\u591a\u65f6\u5019\u4f60\u53d1\u73b0\u4f60\u7684\u4ee3\u7801\u4f1a\u83ab\u540d\u5176\u5999\u7684\u5931\u6548\uff0c\u627e\u6765\u627e\u53bb\u53c8\u627e\u4e0d\u5230\u539f\u56e0\uff0c\u8fd9\u65f6\u6253\u5f00background\u7684\u63a7\u5236\u53f0\u624d\u53d1\u73b0\u539f\u6765\u67d0\u4e2a\u5730\u65b9\u5199\u9519\u4e86\u5bfc\u81f4\u4ee3\u7801\u6ca1\u751f\u6548\uff0c\u6b63\u5f0f\u7531\u4e8ebackground\u62a5\u9519\u7684\u9690\u853d\u6027(\u9700\u8981\u4e3b\u52a8\u6253\u5f00\u5bf9\u5e94\u7684\u63a7\u5236\u53f0\u624d\u80fd\u770b\u5230\u9519\u8bef)\uff0c\u6240\u4ee5\u7279\u522b\u6ce8\u610f\u8fd9\u70b9\u3002\n\n## \u5982\u4f55\u8ba9popup\u9875\u9762\u4e0d\u5173\u95ed\n\n\u5728\u5bf9popup\u9875\u9762\u5ba1\u67e5\u5143\u7d20\u7684\u65f6\u5019popup\u4f1a\u88ab\u5f3a\u5236\u6253\u5f00\u65e0\u6cd5\u5173\u95ed\uff0c\u53ea\u6709\u63a7\u5236\u53f0\u5173\u95ed\u4e86\u624d\u53ef\u4ee5\u5173\u95edpopup\uff0c\u539f\u56e0\u5f88\u7b80\u5355\uff1a\u5982\u679cpopup\u5173\u95ed\u4e86\u63a7\u5236\u53f0\u5c31\u6ca1\u7528\u4e86\u3002\u8fd9\u79cd\u65b9\u6cd5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u5f88\u5b9e\u7528\uff01\n\n## \u4e0d\u652f\u6301\u5185\u8054JavaScript\u7684\u6267\u884c\n\n\u4e5f\u5c31\u662f\u4e0d\u652f\u6301\u5c06js\u76f4\u63a5\u5199\u5728html\u4e2d\uff0c\u6bd4\u5982\uff1a\n\n```html\n<input id=\"btn\" type=\"button\" value=\"\u6536\u85cf\" onclick=\"test()\"/>\n```\n\n\u62a5\u9519\u5982\u4e0b\uff1a\n\n\tRefused to execute inline event handler because it violates the following Content Security Policy directive: \"script-src 'self' blob: filesystem: chrome-extension-resource:\". Either the 'unsafe-inline' keyword, a hash ('sha256-...'), or a nonce ('nonce-...') is required to enable inline execution.\n\n\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u7528JS\u7ed1\u5b9a\u4e8b\u4ef6\uff1a\n\n```javascript\n$('#btn').on('click', function(){alert('\u6d4b\u8bd5')});\n```\n\n\u53e6\u5916\uff0c\u5bf9\u4e8eA\u6807\u7b7e\uff0c\u8fd9\u6837\u5199`href=\"javascript:;\"`\u7136\u540e\u7528JS\u7ed1\u5b9a\u4e8b\u4ef6\u867d\u7136\u63a7\u5236\u53f0\u4f1a\u62a5\u9519\uff0c\u4f46\u662f\u4e0d\u53d7\u5f71\u54cd\uff0c\u5f53\u7136\u5f3a\u8feb\u75c7\u60a3\u8005\u53d7\u4e0d\u4e86\u7684\u8bdd\u53ea\u80fd\u5199\u6210`href=\"#\"`\u4e86\u3002\n\n\u5982\u679c\u8fd9\u6837\u5199\uff1a\n\n\t<a href=\"javascript:;\" id=\"get_secret\">\u8bf7\u6c42secret</a>\n\n\u62a5\u9519\u5982\u4e0b\uff1a\n\n\tRefused to execute JavaScript URL because it violates the following Content Security Policy directive: \"script-src 'self' blob: filesystem: chrome-extension-resource:\". Either the 'unsafe-inline' keyword, a hash ('sha256-...'), or a nonce ('nonce-...') is required to enable inline execution.\n\n## \u6ce8\u5165CSS\u7684\u65f6\u5019\u5fc5\u987b\u5c0f\u5fc3\n\n\u7531\u4e8e\u901a\u8fc7`content_scripts`\u6ce8\u5165\u7684CSS\u4f18\u5148\u7ea7\u975e\u5e38\u9ad8\uff0c\u51e0\u4e4e\u4ec5\u6b21\u4e8e\u6d4f\u89c8\u5668\u9ed8\u8ba4\u6837\u5f0f\uff0c\u7a0d\u4e0d\u6ce8\u610f\u53ef\u80fd\u5c31\u4f1a\u5f71\u54cd\u4e00\u4e9b\u7f51\u7ad9\u7684\u5c55\u793a\u6548\u679c\uff0c\u6240\u4ee5\u5c3d\u91cf\u4e0d\u8981\u5199\u4e00\u4e9b\u5f71\u54cd\u5168\u5c40\u7684\u6837\u5f0f\u3002\n\n\u4e4b\u6240\u4ee5\u5f3a\u8c03\u8fd9\u4e2a\uff0c\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5e26\u6765\u7684\u95ee\u9898\u975e\u5e38\u9690\u853d\uff0c\u4e0d\u592a\u5bb9\u6613\u627e\u5230\uff0c\u53ef\u80fd\u4f60\u6b63\u5728\u5199\u67d0\u4e2a\u7f51\u9875\uff0c\u6628\u5929\u6837\u5f0f\u8fd8\u662f\u597d\u597d\u7684\uff0c\u600e\u4e48\u4eca\u5929\u5c31\u7a81\u7136\u4e0d\u884c\u4e86\uff1f\u7136\u540e\u4f60\u8f9b\u8f9b\u82e6\u82e6\u627e\u6765\u627e\u53bb\uff0c\u627e\u4e86\u534a\u5929\u624d\u53d1\u73b0\u7adf\u7136\u662f\u56e0\u4e3a\u63d2\u4ef6\u91cc\u9762\u7684\u4e00\u4e2a\u6837\u5f0f\u5f71\u54cd\u7684\uff01\n\n![](http://image.liuxianan.com/201706/20170620_175530_598_9800.png)\n\n\n# \u6253\u5305\u4e0e\u53d1\u5e03\n\n\u6253\u5305\u7684\u8bdd\u76f4\u63a5\u5728\u63d2\u4ef6\u7ba1\u7406\u9875\u6709\u4e00\u4e2a\u6253\u5305\u6309\u94ae\uff1a\n\n![](http://image.liuxianan.com/201706/20170621_181130_362_3360.png)\n\n\u7136\u540e\u4f1a\u751f\u6210\u4e00\u4e2a`.crx`\u6587\u4ef6\uff0c\u8981\u53d1\u5e03\u5230Google\u5e94\u7528\u5546\u5e97\u7684\u8bdd\u9700\u8981\u5148\u767b\u5f55\u4f60\u7684Google\u8d26\u53f7\uff0c\u7136\u540e\u82b15\u4e2a$\u6ce8\u518c\u4e3a\u5f00\u53d1\u8005\uff0c\u672c\u4eba\u592a\u7a77\uff0c\u5c31\u61d2\u5f97\u4eb2\u81ea\u9a8c\u8bc1\u4e86\uff0c\u6709\u53d1\u5e03\u9700\u6c42\u7684\u81ea\u5df1\u53bb\u6574\u5427\u3002\n\n![](http://image.liuxianan.com/201707/20170710_221653_875_3099.png)\n\n# \u53c2\u8003\n\n## \u5b98\u65b9\u8d44\u6599\n\n\u63a8\u8350\u67e5\u770b\u5b98\u65b9\u6587\u6863\uff0c\u867d\u7136\u662f\u82f1\u6587\uff0c\u4f46\u662f\u5168\u4e14\u65b0\uff0c\u56fd\u5185\u7684\u4e2d\u6587\u8d44\u6599\u90fd\u6bd4\u8f83\u65e7\uff08\u6ce8\u610f\u4ee5\u4e0b\u5168\u90e8\u9700\u8981\u7ffb\u5899\uff09\uff1a\n\n* [Chrome\u63d2\u4ef6\u5b98\u65b9\u6587\u6863\u4e3b\u9875](https://developer.chrome.com/extensions)\n* [Chrome\u63d2\u4ef6\u5b98\u65b9\u793a\u4f8b](https://developer.chrome.com/extensions/samples)\n* [manifest\u6e05\u5355\u6587\u4ef6](https://developer.chrome.com/extensions/manifest)\n* [permissions\u6743\u9650](https://developer.chrome.com/extensions/permissions)\n* [chrome.xxx.api\u6587\u6863](https://developer.chrome.com/extensions/api_index)\n* [\u6a21\u7cca\u5339\u914d\u89c4\u5219\u8bed\u6cd5\u8be6\u89e3](https://developer.chrome.com/extensions/match_patterns)\n\n## \u7b2c\u4e09\u65b9\u8d44\u6599\n\n\u90e8\u5206\u4e2d\u6587\u8d44\u6599\uff0c\u4e0d\u662f\u7279\u522b\u63a8\u8350\uff1a\n\n* [360\u5b89\u5168\u6d4f\u89c8\u5668\u5f00\u53d1\u6587\u6863](http://open.se.360.cn/open/extension_dev/overview.html)\n* [360\u6781\u901f\u6d4f\u89c8\u5668Chrome\u6269\u5c55\u5f00\u53d1\u6587\u6863](http://open.chrome.360.cn/extension_dev/overview.html)\n* [Chrome\u6269\u5c55\u5f00\u53d1\u6781\u5ba2\u7cfb\u5217\u535a\u5ba2](http://www.cnblogs.com/champagne/p/)\n\n## \u9644\u56fe\n\n\u9644\u56fe\uff1aChrome\u9ad8\u6e05png\u683c\u5f0flogo\uff1a\n\n![](http://image.liuxianan.com/201706/20170619_113331_710_1132.png)\n",
        "releases": []
    }
}